<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3강 | 끄적끄적 블로그</title>
    <meta name="description" content="개발 관련 블로그">
    <link rel="icon" href="/study-collection/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    
    <link rel="preload" href="/study-collection/assets/css/0.styles.48760978.css" as="style"><link rel="preload" href="/study-collection/assets/js/app.e690a7ad.js" as="script"><link rel="preload" href="/study-collection/assets/js/2.57ac1cf6.js" as="script"><link rel="preload" href="/study-collection/assets/js/50.7ed73e03.js" as="script"><link rel="prefetch" href="/study-collection/assets/js/10.0f459d4b.js"><link rel="prefetch" href="/study-collection/assets/js/11.1e18e0bc.js"><link rel="prefetch" href="/study-collection/assets/js/12.a2f61099.js"><link rel="prefetch" href="/study-collection/assets/js/13.798a767e.js"><link rel="prefetch" href="/study-collection/assets/js/14.c9fd3891.js"><link rel="prefetch" href="/study-collection/assets/js/15.af8ec704.js"><link rel="prefetch" href="/study-collection/assets/js/16.5d605477.js"><link rel="prefetch" href="/study-collection/assets/js/17.6e6c1146.js"><link rel="prefetch" href="/study-collection/assets/js/18.3176008d.js"><link rel="prefetch" href="/study-collection/assets/js/19.8c74b4e5.js"><link rel="prefetch" href="/study-collection/assets/js/20.97e5d361.js"><link rel="prefetch" href="/study-collection/assets/js/21.4c1fa2b8.js"><link rel="prefetch" href="/study-collection/assets/js/22.0d96d8a4.js"><link rel="prefetch" href="/study-collection/assets/js/23.3c0d36bd.js"><link rel="prefetch" href="/study-collection/assets/js/24.1d2d0896.js"><link rel="prefetch" href="/study-collection/assets/js/25.33502349.js"><link rel="prefetch" href="/study-collection/assets/js/26.6e9b979c.js"><link rel="prefetch" href="/study-collection/assets/js/27.6e61b2e1.js"><link rel="prefetch" href="/study-collection/assets/js/28.5cd88f70.js"><link rel="prefetch" href="/study-collection/assets/js/29.ac7aba45.js"><link rel="prefetch" href="/study-collection/assets/js/3.93a17c14.js"><link rel="prefetch" href="/study-collection/assets/js/30.d48e0c5e.js"><link rel="prefetch" href="/study-collection/assets/js/31.9e22ae77.js"><link rel="prefetch" href="/study-collection/assets/js/32.9cf1cd4f.js"><link rel="prefetch" href="/study-collection/assets/js/33.b82b0da1.js"><link rel="prefetch" href="/study-collection/assets/js/34.69d418de.js"><link rel="prefetch" href="/study-collection/assets/js/35.0b5ef45a.js"><link rel="prefetch" href="/study-collection/assets/js/36.816961b4.js"><link rel="prefetch" href="/study-collection/assets/js/37.72557551.js"><link rel="prefetch" href="/study-collection/assets/js/38.4bc9499b.js"><link rel="prefetch" href="/study-collection/assets/js/39.788958d0.js"><link rel="prefetch" href="/study-collection/assets/js/4.eb464917.js"><link rel="prefetch" href="/study-collection/assets/js/40.0ca508dc.js"><link rel="prefetch" href="/study-collection/assets/js/41.0b881381.js"><link rel="prefetch" href="/study-collection/assets/js/42.38dec8b2.js"><link rel="prefetch" href="/study-collection/assets/js/43.95683a8e.js"><link rel="prefetch" href="/study-collection/assets/js/44.f62ec7c9.js"><link rel="prefetch" href="/study-collection/assets/js/45.ec8cfb39.js"><link rel="prefetch" href="/study-collection/assets/js/46.582516d8.js"><link rel="prefetch" href="/study-collection/assets/js/47.86aec9f6.js"><link rel="prefetch" href="/study-collection/assets/js/48.6c6875cf.js"><link rel="prefetch" href="/study-collection/assets/js/49.f3d210be.js"><link rel="prefetch" href="/study-collection/assets/js/5.e397f095.js"><link rel="prefetch" href="/study-collection/assets/js/51.5fa71b02.js"><link rel="prefetch" href="/study-collection/assets/js/52.d3739372.js"><link rel="prefetch" href="/study-collection/assets/js/53.a62d9f59.js"><link rel="prefetch" href="/study-collection/assets/js/54.488509bd.js"><link rel="prefetch" href="/study-collection/assets/js/55.5bc0aa75.js"><link rel="prefetch" href="/study-collection/assets/js/56.28814797.js"><link rel="prefetch" href="/study-collection/assets/js/57.7f8a1952.js"><link rel="prefetch" href="/study-collection/assets/js/58.fb4e392e.js"><link rel="prefetch" href="/study-collection/assets/js/59.a2ee58f5.js"><link rel="prefetch" href="/study-collection/assets/js/6.9e5be50c.js"><link rel="prefetch" href="/study-collection/assets/js/60.c68611cd.js"><link rel="prefetch" href="/study-collection/assets/js/61.23d34dbe.js"><link rel="prefetch" href="/study-collection/assets/js/62.649f1716.js"><link rel="prefetch" href="/study-collection/assets/js/63.753b1bc4.js"><link rel="prefetch" href="/study-collection/assets/js/64.bfd2089c.js"><link rel="prefetch" href="/study-collection/assets/js/65.e5866905.js"><link rel="prefetch" href="/study-collection/assets/js/66.602e8735.js"><link rel="prefetch" href="/study-collection/assets/js/67.6eeb03f1.js"><link rel="prefetch" href="/study-collection/assets/js/68.7218707c.js"><link rel="prefetch" href="/study-collection/assets/js/69.64efdf32.js"><link rel="prefetch" href="/study-collection/assets/js/7.68f1698e.js"><link rel="prefetch" href="/study-collection/assets/js/70.ba67f7b0.js"><link rel="prefetch" href="/study-collection/assets/js/71.75b7a3d3.js"><link rel="prefetch" href="/study-collection/assets/js/72.d497b4ff.js"><link rel="prefetch" href="/study-collection/assets/js/73.3f5de4ce.js"><link rel="prefetch" href="/study-collection/assets/js/74.ca734cf7.js"><link rel="prefetch" href="/study-collection/assets/js/75.ef902bb5.js"><link rel="prefetch" href="/study-collection/assets/js/8.f0273f34.js"><link rel="prefetch" href="/study-collection/assets/js/9.d2746b0e.js">
    <link rel="stylesheet" href="/study-collection/assets/css/0.styles.48760978.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-collection/" class="home-link router-link-active"><!----> <span class="site-name">끄적끄적 블로그</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study-collection/guide.html" class="sidebar-link">Intro</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Book summary</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>자바 프로그래밍 면접 이렇게 준비한다</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>클린코드</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-collection/book/clean-code/00.html" class="sidebar-link">0장 들어가면서</a></li><li><a href="/study-collection/book/clean-code/01.html" class="sidebar-link">1장 깨끗한 코드</a></li><li><a href="/study-collection/book/clean-code/02.html" class="sidebar-link">2장 의미있는 이름</a></li><li><a href="/study-collection/book/clean-code/03.html" class="active sidebar-link">3장 함수</a></li><li><a href="/study-collection/book/clean-code/04.html" class="sidebar-link">4장 주석</a></li><li><a href="/study-collection/book/clean-code/05.html" class="sidebar-link">5장 포맷팅</a></li><li><a href="/study-collection/book/clean-code/06.html" class="sidebar-link">6장 객체와 자료구조</a></li><li><a href="/study-collection/book/clean-code/07.html" class="sidebar-link">7장 오류처리</a></li><li><a href="/study-collection/book/clean-code/08.html" class="sidebar-link">8장 경계</a></li><li><a href="/study-collection/book/clean-code/09.html" class="sidebar-link">9장 단위테스트</a></li><li><a href="/study-collection/book/clean-code/10.html" class="sidebar-link">10장 클래스</a></li><li><a href="/study-collection/book/clean-code/11.html" class="sidebar-link">11장 시스템</a></li><li><a href="/study-collection/book/clean-code/12.html" class="sidebar-link">12장 창발성</a></li><li><a href="/study-collection/book/clean-code/13.html" class="sidebar-link">13장 동시성</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>스프링 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>고 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>마이크로서비스 구축과 운영</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tech</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3강"><a href="#_3강" class="header-anchor">#</a> 3강</h1> <p></p><div class="table-of-contents"><ul><li><a href="#작게-만들어라">작게 만들어라!</a></li><li><a href="#한-가지만-해라">한 가지만 해라!</a></li><li><a href="#함수당-추상화-수준은-하나로">함수당 추상화 수준은 하나로</a></li><li><a href="#위에서-아래로-코드-읽기-내려가기-규칙">위에서 아래로 코드 읽기 : 내려가기 규칙</a></li><li><a href="#switch-문">Switch 문</a></li><li><a href="#서술적인-이름을-사용하자">서술적인 이름을 사용하자</a></li><li><a href="#함수-인수-파라미터">함수 인수 (파라미터)</a></li><li><a href="#많이-쓰는-단항-형식">많이 쓰는 단항 형식</a></li><li><a href="#플래그-인수">플래그 인수</a></li><li><a href="#이항-함수">이항 함수</a></li><li><a href="#삼항-함수">삼항 함수</a></li><li><a href="#인수-객체">인수 객체</a></li><li><a href="#동사와-키워드">동사와 키워드</a></li><li><a href="#부수효과를-일으키지-말자">부수효과를 일으키지 말자</a></li><li><a href="#출력-인수">출력 인수</a></li><li><a href="#명령과-조회의-분리">명령과 조회의 분리</a></li><li><a href="#오류-코드보다-예외를-사용하라">오류 코드보다 예외를 사용하라</a></li><li><a href="#반복하지-마라">반복하지 마라!</a></li><li><a href="#구조적-프로그래밍">구조적 프로그래밍</a></li><li><a href="#함수를-어떻게-짜죠">함수를 어떻게 짜죠?</a></li></ul></div><p></p> <ul><li>아래의 함수에선 긴 함수에 괴상한 문자열 등.. 보기가 어려운 함수다</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Code1</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">testableHtml</span><span class="token punctuation">(</span>
      <span class="token class-name">PageData</span> pageData<span class="token punctuation">,</span>
      <span class="token keyword">boolean</span> includeSuiteSetup
  <span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">WikiPage</span> wikiPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">getWikiPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">StringBuffer</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>includeSuiteSetup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WikiPage</span> suiteSetup <span class="token operator">=</span>
            <span class="token class-name">PageCrawlerImpl</span><span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span>
                <span class="token class-name">SuiteResponder</span><span class="token punctuation">.</span>SUITE_SETUP_NAME<span class="token punctuation">,</span> wikiPage
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>suiteSetup <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">WikiPagePath</span> pagePath <span class="token operator">=</span>
              suiteSetup<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>suiteSetup<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> pagePathName <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>pagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
          buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;!include -setup .&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pagePathName<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">WikiPage</span> setup <span class="token operator">=</span>
          <span class="token class-name">PageCrawlerImpl</span><span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span><span class="token string">&quot;SetUp&quot;</span><span class="token punctuation">,</span> wikiPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>setup <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WikiPagePath</span> setupPath <span class="token operator">=</span>
            wikiPage<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>setup<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> setupPathName <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>setupPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;!include -setup .&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>setupPathName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">WikiPage</span> teardown <span class="token operator">=</span>
          <span class="token class-name">PageCrawlerImpl</span><span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span><span class="token string">&quot;TearDown&quot;</span><span class="token punctuation">,</span> wikiPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>teardown <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WikiPagePath</span> tearDownPath <span class="token operator">=</span>
            wikiPage<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>teardown<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> tearDownPathName <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>tearDownPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;!include -teardown .&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>tearDownPathName<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>includeSuiteSetup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">WikiPage</span> suiteTeardown <span class="token operator">=</span>
            <span class="token class-name">PageCrawlerImpl</span><span class="token punctuation">.</span><span class="token function">getInheritedPage</span><span class="token punctuation">(</span>
                <span class="token class-name">SuiteResponder</span><span class="token punctuation">.</span>SUITE_TEARDOWN_NAME<span class="token punctuation">,</span>
                wikiPage
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>suiteTeardown <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">WikiPagePath</span> pagePath <span class="token operator">=</span>
              suiteTeardown<span class="token punctuation">.</span><span class="token function">getPageCrawler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFullPath</span><span class="token punctuation">(</span>suiteTeardown<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> pagePathName <span class="token operator">=</span> <span class="token class-name">PathParser</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>pagePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
          buffer<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;!include -teardown .&quot;</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pagePathName<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    pageData<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> pageData<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>뭐가 뭔지 알 수가없다.</li> <li>이프문 안에 이프문에 조건체크는 뭘하라는건지 알기가 어렵다</li> <li>리팩토링한 코드를 살펴보면</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Code2</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">renderPageWithSetupsAndTeardowns</span><span class="token punctuation">(</span>
      <span class="token class-name">PageData</span> pageData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isSuite
  <span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> isTestPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isTestPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">WikiPage</span> testPage <span class="token operator">=</span> pageData<span class="token punctuation">.</span><span class="token function">getWikiPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">StringBuffer</span> newPageContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">includeSetupPages</span><span class="token punctuation">(</span>testPage<span class="token punctuation">,</span> newPageContent<span class="token punctuation">,</span> isSuite<span class="token punctuation">)</span><span class="token punctuation">;</span>
      newPageContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pageData<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">includeTeardownPages</span><span class="token punctuation">(</span>testPage<span class="token punctuation">,</span> newPageContent<span class="token punctuation">,</span> isSuite<span class="token punctuation">)</span><span class="token punctuation">;</span>
      pageData<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>newPageContent<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> pageData<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>정확하게 무슨일을 하는지는 몰라도, 얼추 설정페이지와 해제 페이지를 테스트페이지에 넣고 랜더링한다 정도는 알 수있다.</li> <li>같은 기능인데 훨씬 이해하기 쉬운 함수인 이유는 뭘까?</li></ul> <h3 id="작게-만들어라"><a href="#작게-만들어라" class="header-anchor">#</a> 작게 만들어라!</h3> <ul><li>함수를 만드는 첫번째 규칙은 작게이다.</li> <li>두번째 규칙은 더 작게 이다.</li> <li>위의 Code2는 아래와 같이 한번더 줄여야 한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Code3</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">renderPageWithSetupAndTeardowns</span><span class="token punctuation">(</span>
    <span class="token class-name">PageData</span> pageData<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isSuite<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isTestPage</span><span class="token punctuation">(</span>pageData<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">includeSetupAndTeardownPages</span><span class="token punctuation">(</span>pageData<span class="token punctuation">,</span> isSuite<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> pageData<span class="token punctuation">.</span><span class="token function">getHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>다시 말해 if문 else문 while문 등에 들어가는 블록은 한줄, 많아야 두줄이어야한다.</li> <li>대게 그 한두줄 안에서 함수를 호출한다. 그러면 바깥을 감싸는 함수는 작아질 뿐만 아니라,
블록 안에서 호출하는 함수 이름을 적절히 지으면 코드를 이해하기도 매우 쉬워진다.</li></ul> <h3 id="한-가지만-해라"><a href="#한-가지만-해라" class="header-anchor">#</a> 한 가지만 해라!</h3> <ul><li>Code1은 너무 여러가지 기능을 하나의 함수에서 한다.</li> <li>반면 리팩토링한 Code3은 한가지의 기능만 처리한다.</li></ul> <div class="language-zsh extra-class"><pre class="language-text"><code>함수는 한가지만 해야 한다. 그 한가지를 잘 해야한다. 그 한 가지만을 해야한다.
</code></pre></div><ul><li>위의 글귀는 좋은 말이지만 그 한 가지가 어떤 것인지 알기가 어려운 문제가 있다.</li> <li>Code3이 세가지를 한다고 주장을 할 수가 있다.</li></ul> <div class="language-zsh extra-class"><pre class="language-text"><code>1. 페이지가 테스트 페이지인지 판단한다.
2. 그렇다면 설정페이지와 해제 페이지를 넣는다.
3. 페이지를 HTML로 렌더링한다.
</code></pre></div><ul><li>하지만 위의 세단계는 지정된 함수 이름 아래 추상화 수준은 하나이다.</li> <li>즉 지정된 함수 이름 아래 추상화 수준이 하나라면, 그 함수는 한가지 작업만 한다고 볼 수 있다.</li> <li>Code1은 여러개의 추상화 단계를 가지고, Code2는 두가지, Code3은 한가지의 추상화 단계를 가진다.</li> <li>Code3의 if문을 includeSetupAndTeardownsIfTestPate뭐 이렇게 바꿀순 있지만, 결국 같은 의미라 추상화 단계가 바뀌진 않는다.</li> <li>즉 특정 함수에서 한가지 일만 하는지 확인하는 방법으로는 의미있는 특정 이름으로 함수를 더 뽑아낼 수 있으면, 걘 여러가지 일을 하는 애라 더 쪼개서 나눠야 한다.</li></ul> <h3 id="함수당-추상화-수준은-하나로"><a href="#함수당-추상화-수준은-하나로" class="header-anchor">#</a> 함수당 추상화 수준은 하나로</h3> <ul><li>하나의 함수당 여러개 수준의 추상화로 하면 헷갈린다.</li> <li>Code1처럼 getHtml 은 추상화가 높고 append는 낮고 이러면 헷갈리니 조심하자.</li> <li>헷갈리는 수준을 넘어 이제 섞여있으면 그다음 유지보수자도 이것저것 붙이게되고, 코드는 엉망이 되고 만다..</li></ul> <h3 id="위에서-아래로-코드-읽기-내려가기-규칙"><a href="#위에서-아래로-코드-읽기-내려가기-규칙" class="header-anchor">#</a> 위에서 아래로 코드 읽기 : 내려가기 규칙</h3> <ul><li>코드는 위에서 아래로 이야기처럼 읽혀야 좋다.</li> <li>한 함수 다음에는 추상화 수준이 한단계 낮은 함수가 온다.</li> <li>즉 위에서 아래로 읽으면 함수 추상화 수준이 한번에 한단계 씩 낮아진다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>TO 설정페이지와 해제 페이지를 포함하려면<span class="token punctuation">,</span> 설정 페이지를 포함하고<span class="token punctuation">,</span> 테스트 페이진 내용을 포함하고<span class="token punctuation">,</span> 해제 페이지를 포함한다<span class="token punctuation">.</span>
    TO 설정 페이지를 포함하려면<span class="token punctuation">,</span> 슈트이면 슈트 설정 페이지를 포함한후<span class="token punctuation">.</span><span class="token punctuation">.</span>
    TO 부모 계층을 검색하려면<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><h3 id="switch-문"><a href="#switch-문" class="header-anchor">#</a> Switch 문</h3> <ul><li>스위치문은 근본적으로 작게 만들기가 어렵다.</li> <li>또한 한가지 작업만을 하는 스위치문은 만들기가 어렵다.</li> <li>여기서 최대한 스마트한 해결법은 각 switch문을 저차월 클래스에 숨기고 절대로 반복하지 않게 만들 수는 있다.</li> <li>다형성(polymorphism)을 이용한 방법이다.</li> <li>아래의 소스는 직원 유형에 따라 다른 값을 계산해 반환하는 함수이다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">calculatePay</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidEmployeeType</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> COMMISSIONED<span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">calculateCommissionedPay</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> HOURLY<span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">calculateHourlyPay</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SALARIED<span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token function">caculateSalariedPay</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidEmployeeType</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>위의 함수에는 몇가지 문제가 있다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>1. 함수가 길다.
    - 새 직원 유형을 추가하면 더 길어진다.

2. 한가지 작업만 수행하지 않는다.

3. SRP를 위반한다. 코드를 변경할 이유가 여럿이기 때문이다.

4. OCP 위반. 새직원 유형을 추가할 때마다 코드를 변경해야한다.

5. 가장 심각한 문제는 위함수와 구조가 동일한 함수가 무한정 존재한다는것이다.
    - isPayday(Employee e, Date date)
    - deliveryPay(Employee e, Money pay);
이런식으로 무한히 늘어날 수 있고, 똑같이 유해하다는 문제가 있다.
</code></pre></div><ul><li>이러한 문제를 해결하는 방법으로 switch문을 추상팩토리 (abstract factory)에 숨긴다.</li> <li>스위치문은 아무에게도 보여주지 않고, 팩토리는 스위치문을 통해 적저한 Employee 파생 클래스의 인스턴스를 생성한다.</li> <li>caculatePay, isPayday, deliverPay같은 함수들은 Employee 인터페이스를 거쳐 호출이 된다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Employee and Factory</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">boolean</span> <span class="token function">isPayday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Money</span> <span class="token function">caculatePay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">deliverPay</span><span class="token punctuation">(</span><span class="token class-name">Money</span> pay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmployeeFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">makeEmployee</span><span class="token punctuation">(</span><span class="token class-name">EmployeeRecord</span> r<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidEmployeeType</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">-</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmployeeFactoryImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmployeeFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">makeEmployee</span><span class="token punctuation">(</span><span class="token class-name">EmployeeRecord</span> r<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InvalidEmployeeType</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> COMMISSIONED<span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommissionedEmployee</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> HOURY<span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HourlyEmployee</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> SALARIED<span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SalariedEmployee</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">InvalidEmployeeType</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">EmployeeFactory</span> employeeFactoryImpl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EmployeeFactoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employeeFactoryImpl<span class="token punctuation">.</span><span class="token function">makeEmployee</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isPayday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 이런식으로 호출이 가능하다.</span>
만약 다른 메소드가 추가되야되면<span class="token punctuation">,</span> <span class="token class-name">Employee</span> 추상클래스에 함수를 추가해주고<span class="token punctuation">,</span>
<span class="token class-name">Employee</span>를 상속받아 구현한 각 <span class="token class-name">CommissionedEmployee</span><span class="token punctuation">,</span> <span class="token class-name">HourlyEmployee</span><span class="token punctuation">,</span> <span class="token class-name">SalariedEmployee</span> 이런애들내부에서
각자 구현을 해주거나 하면된다<span class="token punctuation">.</span> <span class="token punctuation">(</span>아니면 기능이 같으면 추상클래스에서 하나만 구현해주던가<span class="token punctuation">)</span>

이럴경우 스위치문은 절대로 변경될 일이 없고<span class="token punctuation">,</span> 상속을 시켜주는 추상클래스만 변경하고<span class="token punctuation">,</span> 각 개별 클래스들은 그대로 냅둘 수 있다<span class="token punctuation">.</span>

기존엔 calculatePay 에서 스위치문 구현하고<span class="token punctuation">,</span> isPayday 에서 스위치문 구현하고 이딴짓을 안해도 된다<span class="token punctuation">.</span>
</code></pre></div><h3 id="서술적인-이름을-사용하자"><a href="#서술적인-이름을-사용하자" class="header-anchor">#</a> 서술적인 이름을 사용하자</h3> <ul><li>testableHtml 같은 함수이름보단 SetupTeardownIncluder.render 이런식으로 바꾸는게 더 좋다.</li> <li>isTestable 뭐 이런식으로..</li> <li>길어도 상관은없다. 차라리 짧고 함축적인거보단 길고 서술적인게 좀더 잘 읽힌다.</li> <li>서술적인 이름을 설정하면 개발자 머리속에서도 설계가 뚜렷해져서 코드를 개선하기도 더 쉬워진다.</li></ul> <h3 id="함수-인수-파라미터"><a href="#함수-인수-파라미터" class="header-anchor">#</a> 함수 인수 (파라미터)</h3> <ul><li>적으면 적을수록 가시성이 좋다..</li> <li>0개가 젤좋고 1개도 괜찮고 2개도 뭐.. 3개부턴 테스트하기도 어려워지고 별로다.</li></ul> <h3 id="많이-쓰는-단항-형식"><a href="#많이-쓰는-단항-형식" class="header-anchor">#</a> 많이 쓰는 단항 형식</h3> <ul><li>함수 인수로 1개를 넘기는 이유로 가장 흔한건 두가지 경우이다.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>1. 인수에 질문을 던지는 경우
    - boolean fileExists(&quot;MyFile&quot;) 
2. 인ㅅ로 뭔가를 변환해 결과를 반환하는 예
    - InputStream fileOpen(&quot;MyFile&quot;);
</code></pre></div><ul><li>드물게 쓰이지만 이벤트 함수는 입력 인수만 있다.</li> <li>프로그램은 함수 호출을 이벤트로 해석해 입력 인수로 시스템 상태를 바꾼다.</li> <li>passwordAttemptFailedNtimes(int attempts) 같은 예</li> <li>이벤트함수는 그 함수가 이벤트함수라는걸 명확하게 나타내줘야 한다. 안그러면 헷갈림</li></ul> <h3 id="플래그-인수"><a href="#플래그-인수" class="header-anchor">#</a> 플래그 인수</h3> <ul><li>플래그 인수는 아주 별로다</li> <li>이미 불리언값을 넘기는거 부터가 함수가 여러개의 역할을 하는거라고 못박는다.</li></ul> <h3 id="이항-함수"><a href="#이항-함수" class="header-anchor">#</a> 이항 함수</h3> <ul><li>인자가 2개인 함수는 1개인거보다 당연히 이해하기가 보통 어렵다.</li> <li>writeField(name) 이 writeField(outputStream, name) 보다 이해하기 쉽다</li> <li>어쩔수없이 2개를 넘겨야 될 때도 있지만, 가급적이면 하나만 넘기도록 변경해 보도록 하자.</li> <li>위와 같은 경우, outputStream 클래스 안에 writeField 메소드를 넣건, 함수내 변수로 outputStream을 넣거나 , 아예 새로운 outputStream만 받는 함수를 만들던가 해보자.</li></ul> <h3 id="삼항-함수"><a href="#삼항-함수" class="header-anchor">#</a> 삼항 함수</h3> <ul><li>보통 어렵다.. 상황에 맞춰서 잘쓰자</li></ul> <h3 id="인수-객체"><a href="#인수-객체" class="header-anchor">#</a> 인수 객체</h3> <ul><li>인수가 너무 많이 필요해지면, 몇개를 묶어서 그냥 클래스로 만들자</li> <li>Circle makeCircle(double x, double y, double radius) -&gt; Circle makeCircle(Point center, double radius)</li></ul> <h3 id="동사와-키워드"><a href="#동사와-키워드" class="header-anchor">#</a> 동사와 키워드</h3> <ul><li>함수의 의도나 인수의 순서와 의도를 제대로 표현하려면 함수이름이 매우 중요하다</li> <li>단항 함수는 함수와 인수가 동사 / 명사 쌍으로 이루도록 하자. (write(name) 요렇게)</li> <li>함수이름에 키워드를 추가하는것도 매우 좋다</li> <li>assertEquals(expected, actual) 보다 assertExpectedEqualsActual(expected, actual) 로 하면 순서를 외울 필요강 없는 이름이다.</li></ul> <h3 id="부수효과를-일으키지-말자"><a href="#부수효과를-일으키지-말자" class="header-anchor">#</a> 부수효과를 일으키지 말자</h3> <ul><li>함수에서 한가지 역할을 한다고 해놓고 남몰래 이상한 다른짓거리를 하면 짜증이 난다.</li> <li>그딴 짓을 하면 시간적인 결합이나 순서 종속성을 초래한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserValidator</span> <span class="token punctuation">{</span>

      <span class="token keyword">private</span> <span class="token class-name">Cryptographer</span> cryptographer<span class="token punctuation">;</span>

      <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token class-name">String</span> userName<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token class-name">UserGateway</span><span class="token punctuation">.</span><span class="token function">findByName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">!=</span> <span class="token class-name">User</span><span class="token punctuation">.</span>NULL<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">String</span> codedPhrase <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getPhraseEncodedByPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">String</span> phrase <span class="token operator">=</span> cryptographer<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>codedPhrase<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;Valid Password&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>phrase<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Session</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>위의 코드를 보면, if 문안에서 세션을 지우는 아주 짜증나는 짓을한다..</li> <li>코드를 읽을때 checkPassword 니까 패스워드만 체크할거라고 믿고 보는데, 안에서 슬그머니 세션도 지우면 예상했던것과는 다른 기능을 하게 된다.</li></ul> <h3 id="출력-인수"><a href="#출력-인수" class="header-anchor">#</a> 출력 인수</h3> <ul><li>일반적으로 우리는 인수를 입력으로 해석한다.</li> <li>인수를 출력으로 사용하면 뭔가 어색하다고 느낀다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token function">appendFooter</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>이 함수를 보면 무언가에 s를 푸터에 첨부하는지, s에 푸터를 첨부하는지 알기 어렵다.</li> <li>실제 함수를 까보면</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">appendFooter</span><span class="token punctuation">(</span><span class="token class-name">StringBuffer</span> report<span class="token punctuation">)</span>
</code></pre></div><ul><li>이런식으로 함수 선언부를 봐야만 뭔짓을 하는지 알 수 있다.</li> <li>이런건 매우 거슬리므로, 출력인수로 사용하라고 나온 this 를 잘 활용하자</li> <li>다시말해 이런식으로 호출하자</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>report<span class="token punctuation">.</span><span class="token function">appendFooter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="명령과-조회의-분리"><a href="#명령과-조회의-분리" class="header-anchor">#</a> 명령과 조회의 분리</h3> <ul><li>함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다.</li> <li>객체 상태를 변경하거나 아니면 객체 정보를 반환하거나</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> attribute<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>위의 함수는 이름이 attribute 인 속성을 찾아 값을 value로 설정한후 boolean 값을 리턴한다.</li> <li>이따구로 짜면</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;unclebob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>이런 괴상한 코드가 나오는데, 저게 설정하라는거 확인하는 함수인지 설정하는함수인지 짐작이 어렵다.</li> <li>set이라는 함수이름자체도 별로고, 조회와 설정이 같이 있어 헷갈린다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">attributeExists</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;unclebob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이렇게 바꾸는게 훠어얼씬낫다.</li></ul> <h3 id="오류-코드보다-예외를-사용하라"><a href="#오류-코드보다-예외를-사용하라" class="header-anchor">#</a> 오류 코드보다 예외를 사용하라</h3> <ul><li>명령함수에서 오류 코드를 반환하는 방식은 명령 / 조회 분리규칙을 미묘하게 위반한다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">deletePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">==</span> E_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">deleteReference</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">==</span> E_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>configKeys<span class="token punctuation">.</span><span class="token function">deleteKey</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">makeKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> E_OK<span class="token punctuation">)</span><span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;page deleted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;configKey not deleted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;deleteReference from registry failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;delete failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> E_ERROR<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>이런식으로 복잡해진다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token function">deletePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">deleteReference</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    configKeys<span class="token punctuation">.</span><span class="token function">deleteKey</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">makeKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이렇게 예외처리로 바꾸는게 더 깔끔해 진다.</li> <li>좀더 깔끔하게 하려면 try / catch 함수를 별도로 빼는 거다</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Page</span> page<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">deletePageAndAllReference</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token function">logError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">deletePageAndAllReferences</span><span class="token punctuation">(</span><span class="token class-name">Page</span> page<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token function">deletePage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">deleteReference</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    configKeys<span class="token punctuation">.</span><span class="token function">deleteKey</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">makeKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">logError</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>모든 오류는 delete에서 처리된다. 따라서 정상동작과 오류처리 동작을 구분해서 좀더 이해하기가 쉽다.</li></ul> <h3 id="반복하지-마라"><a href="#반복하지-마라" class="header-anchor">#</a> 반복하지 마라!</h3> <ul><li>말그대로 반복해서 중복되는 코드를 만들지 말자</li></ul> <h3 id="구조적-프로그래밍"><a href="#구조적-프로그래밍" class="header-anchor">#</a> 구조적 프로그래밍</h3> <ul><li>모든 함수와 함수 내 모든 블록에 입구와 출구는 하나여야 한다</li> <li>return 문이 하나여야 하고, 루프 안에서 break 나 continue도 안되고 goto 도 절대 안된다.(그런가..?)</li> <li>뭐 적당히 쓰랜다</li></ul> <h3 id="함수를-어떻게-짜죠"><a href="#함수를-어떻게-짜죠" class="header-anchor">#</a> 함수를 어떻게 짜죠?</h3> <ul><li>글쓰기와 마찬가지로 초안을 대충 적고 다시 고친다.</li> <li>함수도 처음엔 길고 복잡하게 짠 다음, 이후에 이름도 바꾸고 중복도 제거하고 순서도 바꾸고 한다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-collection/book/clean-code/02.html" class="prev">2장 의미있는 이름</a></span> <span class="next"><a href="/study-collection/book/clean-code/04.html">4장 주석</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-collection/assets/js/app.e690a7ad.js" defer></script><script src="/study-collection/assets/js/2.57ac1cf6.js" defer></script><script src="/study-collection/assets/js/50.7ed73e03.js" defer></script>
  </body>
</html>
