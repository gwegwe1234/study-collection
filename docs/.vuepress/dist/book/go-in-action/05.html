<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>5강 | 끄적끄적 블로그</title>
    <meta name="description" content="개발 관련 블로그">
    <link rel="icon" href="/study-collection/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    
    <link rel="preload" href="/study-collection/assets/css/0.styles.48760978.css" as="style"><link rel="preload" href="/study-collection/assets/js/app.714457d4.js" as="script"><link rel="preload" href="/study-collection/assets/js/2.98af7b00.js" as="script"><link rel="preload" href="/study-collection/assets/js/104.2c477af4.js" as="script"><link rel="prefetch" href="/study-collection/assets/js/10.0a440d3b.js"><link rel="prefetch" href="/study-collection/assets/js/100.6a66d867.js"><link rel="prefetch" href="/study-collection/assets/js/101.3c6072fb.js"><link rel="prefetch" href="/study-collection/assets/js/102.944156b1.js"><link rel="prefetch" href="/study-collection/assets/js/103.cf2f7a5d.js"><link rel="prefetch" href="/study-collection/assets/js/105.16a45e78.js"><link rel="prefetch" href="/study-collection/assets/js/106.ed2049bb.js"><link rel="prefetch" href="/study-collection/assets/js/107.8f2d0ccb.js"><link rel="prefetch" href="/study-collection/assets/js/108.d9891293.js"><link rel="prefetch" href="/study-collection/assets/js/109.9be66288.js"><link rel="prefetch" href="/study-collection/assets/js/11.f53dacbf.js"><link rel="prefetch" href="/study-collection/assets/js/110.42c1e4cc.js"><link rel="prefetch" href="/study-collection/assets/js/111.d6166b3d.js"><link rel="prefetch" href="/study-collection/assets/js/112.7ff734d6.js"><link rel="prefetch" href="/study-collection/assets/js/113.bc3ff50d.js"><link rel="prefetch" href="/study-collection/assets/js/114.b6eeba15.js"><link rel="prefetch" href="/study-collection/assets/js/115.77b83949.js"><link rel="prefetch" href="/study-collection/assets/js/116.edfc7646.js"><link rel="prefetch" href="/study-collection/assets/js/117.7039109d.js"><link rel="prefetch" href="/study-collection/assets/js/118.7c307a71.js"><link rel="prefetch" href="/study-collection/assets/js/119.1f276519.js"><link rel="prefetch" href="/study-collection/assets/js/12.a1507b24.js"><link rel="prefetch" href="/study-collection/assets/js/120.7e92eaf5.js"><link rel="prefetch" href="/study-collection/assets/js/121.3c820cd6.js"><link rel="prefetch" href="/study-collection/assets/js/122.32eae8e2.js"><link rel="prefetch" href="/study-collection/assets/js/123.6683e4a4.js"><link rel="prefetch" href="/study-collection/assets/js/124.ff40871c.js"><link rel="prefetch" href="/study-collection/assets/js/125.fe874201.js"><link rel="prefetch" href="/study-collection/assets/js/126.c63ce5b2.js"><link rel="prefetch" href="/study-collection/assets/js/127.48655472.js"><link rel="prefetch" href="/study-collection/assets/js/128.31681dcc.js"><link rel="prefetch" href="/study-collection/assets/js/129.a5616d9d.js"><link rel="prefetch" href="/study-collection/assets/js/13.c941eee6.js"><link rel="prefetch" href="/study-collection/assets/js/130.13be3410.js"><link rel="prefetch" href="/study-collection/assets/js/131.210fa834.js"><link rel="prefetch" href="/study-collection/assets/js/132.6b487489.js"><link rel="prefetch" href="/study-collection/assets/js/133.916d2f70.js"><link rel="prefetch" href="/study-collection/assets/js/134.d90a7277.js"><link rel="prefetch" href="/study-collection/assets/js/135.6699f99b.js"><link rel="prefetch" href="/study-collection/assets/js/136.e8ad2903.js"><link rel="prefetch" href="/study-collection/assets/js/137.2c5839d8.js"><link rel="prefetch" href="/study-collection/assets/js/138.76726ae7.js"><link rel="prefetch" href="/study-collection/assets/js/139.10fd1055.js"><link rel="prefetch" href="/study-collection/assets/js/14.e1033a24.js"><link rel="prefetch" href="/study-collection/assets/js/15.beb965a2.js"><link rel="prefetch" href="/study-collection/assets/js/16.d42013bd.js"><link rel="prefetch" href="/study-collection/assets/js/17.b0f3f9c6.js"><link rel="prefetch" href="/study-collection/assets/js/18.b18a0156.js"><link rel="prefetch" href="/study-collection/assets/js/19.9c0ddebf.js"><link rel="prefetch" href="/study-collection/assets/js/20.fd6f4fba.js"><link rel="prefetch" href="/study-collection/assets/js/21.0677b702.js"><link rel="prefetch" href="/study-collection/assets/js/22.7438b9cb.js"><link rel="prefetch" href="/study-collection/assets/js/23.fe0627eb.js"><link rel="prefetch" href="/study-collection/assets/js/24.3ee0641c.js"><link rel="prefetch" href="/study-collection/assets/js/25.2d9f5c8a.js"><link rel="prefetch" href="/study-collection/assets/js/26.3a85cb76.js"><link rel="prefetch" href="/study-collection/assets/js/27.386d61e8.js"><link rel="prefetch" href="/study-collection/assets/js/28.3c41d29e.js"><link rel="prefetch" href="/study-collection/assets/js/29.a067ed2b.js"><link rel="prefetch" href="/study-collection/assets/js/3.cc14140e.js"><link rel="prefetch" href="/study-collection/assets/js/30.96af741b.js"><link rel="prefetch" href="/study-collection/assets/js/31.4d147042.js"><link rel="prefetch" href="/study-collection/assets/js/32.a8c773d3.js"><link rel="prefetch" href="/study-collection/assets/js/33.5a34ba5d.js"><link rel="prefetch" href="/study-collection/assets/js/34.308c3480.js"><link rel="prefetch" href="/study-collection/assets/js/35.5551077b.js"><link rel="prefetch" href="/study-collection/assets/js/36.e919cf24.js"><link rel="prefetch" href="/study-collection/assets/js/37.c0fcc3ff.js"><link rel="prefetch" href="/study-collection/assets/js/38.5c704261.js"><link rel="prefetch" href="/study-collection/assets/js/39.738355cf.js"><link rel="prefetch" href="/study-collection/assets/js/4.5f7b136d.js"><link rel="prefetch" href="/study-collection/assets/js/40.0343da82.js"><link rel="prefetch" href="/study-collection/assets/js/41.146efbca.js"><link rel="prefetch" href="/study-collection/assets/js/42.9e6c7a7a.js"><link rel="prefetch" href="/study-collection/assets/js/43.8fe83696.js"><link rel="prefetch" href="/study-collection/assets/js/44.adc39a92.js"><link rel="prefetch" href="/study-collection/assets/js/45.b51ef6a1.js"><link rel="prefetch" href="/study-collection/assets/js/46.991a00d7.js"><link rel="prefetch" href="/study-collection/assets/js/47.bce5929b.js"><link rel="prefetch" href="/study-collection/assets/js/48.efac19c8.js"><link rel="prefetch" href="/study-collection/assets/js/49.0f1f72ee.js"><link rel="prefetch" href="/study-collection/assets/js/5.37915bd6.js"><link rel="prefetch" href="/study-collection/assets/js/50.f9e7518e.js"><link rel="prefetch" href="/study-collection/assets/js/51.476c19cb.js"><link rel="prefetch" href="/study-collection/assets/js/52.21fe5418.js"><link rel="prefetch" href="/study-collection/assets/js/53.4332f9ec.js"><link rel="prefetch" href="/study-collection/assets/js/54.8a339258.js"><link rel="prefetch" href="/study-collection/assets/js/55.aca2ea5b.js"><link rel="prefetch" href="/study-collection/assets/js/56.a8c4b288.js"><link rel="prefetch" href="/study-collection/assets/js/57.9bf63ab6.js"><link rel="prefetch" href="/study-collection/assets/js/58.983bce15.js"><link rel="prefetch" href="/study-collection/assets/js/59.9e26d81a.js"><link rel="prefetch" href="/study-collection/assets/js/6.e00c02d2.js"><link rel="prefetch" href="/study-collection/assets/js/60.2790ca36.js"><link rel="prefetch" href="/study-collection/assets/js/61.2cc8c681.js"><link rel="prefetch" href="/study-collection/assets/js/62.cefb6822.js"><link rel="prefetch" href="/study-collection/assets/js/63.93c1d3dd.js"><link rel="prefetch" href="/study-collection/assets/js/64.761470e6.js"><link rel="prefetch" href="/study-collection/assets/js/65.e3577205.js"><link rel="prefetch" href="/study-collection/assets/js/66.85f403ad.js"><link rel="prefetch" href="/study-collection/assets/js/67.b31f4a93.js"><link rel="prefetch" href="/study-collection/assets/js/68.475ed165.js"><link rel="prefetch" href="/study-collection/assets/js/69.cbea6eea.js"><link rel="prefetch" href="/study-collection/assets/js/7.dd169403.js"><link rel="prefetch" href="/study-collection/assets/js/70.e2a7be22.js"><link rel="prefetch" href="/study-collection/assets/js/71.dc035fed.js"><link rel="prefetch" href="/study-collection/assets/js/72.78566517.js"><link rel="prefetch" href="/study-collection/assets/js/73.7ddfc73c.js"><link rel="prefetch" href="/study-collection/assets/js/74.a3e84aca.js"><link rel="prefetch" href="/study-collection/assets/js/75.2d42fdd6.js"><link rel="prefetch" href="/study-collection/assets/js/76.ce3e0113.js"><link rel="prefetch" href="/study-collection/assets/js/77.81354305.js"><link rel="prefetch" href="/study-collection/assets/js/78.5f1d4858.js"><link rel="prefetch" href="/study-collection/assets/js/79.1449ff42.js"><link rel="prefetch" href="/study-collection/assets/js/8.c27afc43.js"><link rel="prefetch" href="/study-collection/assets/js/80.7286f0b1.js"><link rel="prefetch" href="/study-collection/assets/js/81.2893dadb.js"><link rel="prefetch" href="/study-collection/assets/js/82.c072032f.js"><link rel="prefetch" href="/study-collection/assets/js/83.55359f14.js"><link rel="prefetch" href="/study-collection/assets/js/84.c36541b9.js"><link rel="prefetch" href="/study-collection/assets/js/85.6cb6dd82.js"><link rel="prefetch" href="/study-collection/assets/js/86.4dc35ad2.js"><link rel="prefetch" href="/study-collection/assets/js/87.07f82663.js"><link rel="prefetch" href="/study-collection/assets/js/88.57be7fc6.js"><link rel="prefetch" href="/study-collection/assets/js/89.a6182355.js"><link rel="prefetch" href="/study-collection/assets/js/9.435b99c3.js"><link rel="prefetch" href="/study-collection/assets/js/90.494db0ff.js"><link rel="prefetch" href="/study-collection/assets/js/91.e09aff05.js"><link rel="prefetch" href="/study-collection/assets/js/92.3a06ba76.js"><link rel="prefetch" href="/study-collection/assets/js/93.1c5e9d71.js"><link rel="prefetch" href="/study-collection/assets/js/94.ee29c51e.js"><link rel="prefetch" href="/study-collection/assets/js/95.e2a5a402.js"><link rel="prefetch" href="/study-collection/assets/js/96.eaf79e40.js"><link rel="prefetch" href="/study-collection/assets/js/97.a21fa22a.js"><link rel="prefetch" href="/study-collection/assets/js/98.7518a679.js"><link rel="prefetch" href="/study-collection/assets/js/99.8b5e43a6.js">
    <link rel="stylesheet" href="/study-collection/assets/css/0.styles.48760978.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-collection/" class="home-link router-link-active"><!----> <span class="site-name">끄적끄적 블로그</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study-collection/guide.html" class="sidebar-link">Intro</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Book summary</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>자바 프로그래밍 면접 이렇게 준비한다</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>클린코드</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>스프링 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>고 인 액션</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-collection/book/go-in-action/01.html" class="sidebar-link">1장 Go와의 첫 만남</a></li><li><a href="/study-collection/book/go-in-action/02.html" class="sidebar-link">2장 Go 간단히 살펴보기</a></li><li><a href="/study-collection/book/go-in-action/03.html" class="sidebar-link">3장 패키징과 내장 도구들</a></li><li><a href="/study-collection/book/go-in-action/04.html" class="sidebar-link">4장 배열, 슬라이스, 맵</a></li><li><a href="/study-collection/book/go-in-action/05.html" class="active sidebar-link">5장 Go의 타입 시스템</a></li><li><a href="/study-collection/book/go-in-action/06.html" class="sidebar-link">6장 동시성</a></li><li><a href="/study-collection/book/go-in-action/07.html" class="sidebar-link">7장 동시성 패턴</a></li><li><a href="/study-collection/book/go-in-action/08.html" class="sidebar-link">8장 표준 라이브러리</a></li><li><a href="/study-collection/book/go-in-action/09.html" class="sidebar-link">9장 테스트와 벤치마킹</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Go 언어를 활용한 마이크로서비스 개발</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>마이크로서비스 구축과 운영</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>카프카 스트림즈 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>모던 자바 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>객체지향의 사실과 오해</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tech</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_5강"><a href="#_5강" class="header-anchor">#</a> 5강</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-사용자정의-타입">1. 사용자정의 타입</a></li><li><a href="#_2-메소드">2. 메소드</a></li><li><a href="#_3-타입의-본질">3. 타입의 본질</a><ul><li><a href="#_3-1-내장-타입">3-1. 내장 타입</a></li><li><a href="#_3-2-참조-타입">3-2. 참조 타입</a></li><li><a href="#_3-3-구조체-타입">3-3. 구조체 타입</a></li></ul></li><li><a href="#_4-인터페이스">4. 인터페이스</a><ul><li><a href="#_4-1-표준-라이브러리">4-1. 표준 라이브러리</a></li><li><a href="#_4-2-인터페이스의-구현-기법">4-2. 인터페이스의 구현 기법</a></li><li><a href="#_4-3-메소드-집합">4-3. 메소드 집합</a></li><li><a href="#_4-4-다형성">4-4. 다형성</a></li></ul></li><li><a href="#_5-타입-임베딩">5. 타입 임베딩</a></li><li><a href="#_6-외부-노출-식별자와-비노출-식별자">6. 외부 노출 식별자와 비노출 식별자</a></li></ul></div><p></p> <h2 id="_1-사용자정의-타입"><a href="#_1-사용자정의-타입" class="header-anchor">#</a> 1. 사용자정의 타입</h2> <ul><li>Go는 사용자정의 타입을 선언 할 수 있는데, struct와 composite 타입을 이용한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 시스템에 user 타입을 선언한다.</span>
<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
	ext <span class="token builtin">int</span>
	privileged <span class="token builtin">bool</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token keyword">var</span> bill user
<span class="token punctuation">}</span>
</code></pre></div><ul><li>위와 같이 구조체를 만들고, 변수로 선언할 수 있다.</li> <li>변수를 선언하면 변수가 표현하는 값이 항상 초기화 된다.</li> <li>초기화가 필요하면 구조체 리터럴로 선언을 해줘야 한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>ted <span class="token operator">:=</span> user <span class="token punctuation">{</span>
	name <span class="token punctuation">:</span> <span class="token string">&quot;ted&quot;</span><span class="token punctuation">,</span>
	email <span class="token punctuation">:</span> <span class="token string">&quot;ted.park@dada.net&quot;</span><span class="token punctuation">,</span>
	ext <span class="token punctuation">:</span> <span class="token number">111</span><span class="token punctuation">,</span>
	privileged<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>:= 는 변수 선언자로, 변수의 선언과 초기화를 한번에 해주는 연산자이다.</li> <li>좀더 간편하게 선언도 가능하다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>cindy <span class="token operator">:=</span> user <span class="token punctuation">{</span><span class="token string">&quot;cindy&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cindy@dada.net&quot;</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>구조체 필드 순서에 맞춰 작성해야 한다.</li> <li>구조체 타입을 선언할 때, 내장 타입만이 아닌 다른 구조체로 선언이 가능하다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	person user
	level <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>이런식으로 admin 구조체 내부에 필드 타입으로 user를 사용할 수도 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>sunny <span class="token operator">:=</span> admin <span class="token punctuation">{</span>
	person <span class="token punctuation">:</span> user <span class="token punctuation">{</span>
		name <span class="token punctuation">:</span> <span class="token string">&quot;sunny&quot;</span><span class="token punctuation">,</span>
		email <span class="token punctuation">:</span> <span class="token string">&quot;sunny@dada.net&quot;</span><span class="token punctuation">,</span>
		ext <span class="token punctuation">:</span> <span class="token number">144</span><span class="token punctuation">,</span>
		privileged<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>		
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	level <span class="token punctuation">:</span> <span class="token string">&quot;super&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>사용자정의 타입을 선언하는 두 번째 방법은 기존의 타입을 새로운 타입의 명세로 활용하는 방법이다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Duration <span class="token builtin">int64</span>
</code></pre></div><ul><li>위의 선언은 표준라이브러리의 time 패키지가 제공하는 타입의 선언이다.</li> <li>이렇게 선언하게 되면, Go는 Duration과 int64를 동일하다고 취급하지 않는다.</li></ul> <h2 id="_2-메소드"><a href="#_2-메소드" class="header-anchor">#</a> 2. 메소드</h2> <ul><li>메소드는 사용자가 정의한 타입에 행위를 정의하기 위한 방법.</li> <li>메소드는 실제로는 func 키워드와 함수 이름 사이에 추가 매개변수를 정의한 함수</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 프로그램의 사용자를 표현하는 user 타입</span>
<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 값 수신자와 함께 notify 메소드를 선언한다.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>u user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다 : %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 포인터 수신자와 함께 changeEmail 메소드를 선언</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">changeEmail</span><span class="token punctuation">(</span>email <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	u<span class="token punctuation">.</span>email <span class="token operator">=</span> email
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// user 타입의 값을 이용하여 값 수신자(receiver)에 선언한 메소드 호출</span>
	ted <span class="token operator">:=</span> user<span class="token punctuation">{</span><span class="token string">&quot;ted&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ted.park@dododada.net&quot;</span><span class="token punctuation">}</span>
	ted<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// user 타입의 포인터를 이용하여 값 수신자에 선언한 메소드 호출</span>
	sunny <span class="token operator">:=</span> <span class="token operator">&amp;</span>user<span class="token punctuation">{</span><span class="token string">&quot;sunny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sunny.sunny@tototata.net&quot;</span><span class="token punctuation">}</span>
	sunny<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	ted<span class="token punctuation">.</span><span class="token function">changeEmail</span><span class="token punctuation">(</span><span class="token string">&quot;ted.park@kakaka.com&quot;</span><span class="token punctuation">)</span>
	ted<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	sunny<span class="token punctuation">.</span><span class="token function">changeEmail</span><span class="token punctuation">(</span><span class="token string">&quot;sunny.sunny@mamamam.co.kr&quot;</span><span class="token punctuation">)</span>
	sunny<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

결과 <span class="token punctuation">:</span>
사용자에게 메일을 전송합니다 <span class="token punctuation">:</span> ted<span class="token operator">&lt;</span>ted<span class="token punctuation">.</span>park@dododada<span class="token punctuation">.</span>net<span class="token operator">&gt;</span>
사용자에게 메일을 전송합니다 <span class="token punctuation">:</span> sunny<span class="token operator">&lt;</span>sunny<span class="token punctuation">.</span>sunny@tototata<span class="token punctuation">.</span>net<span class="token operator">&gt;</span>
사용자에게 메일을 전송합니다 <span class="token punctuation">:</span> ted<span class="token operator">&lt;</span>ted<span class="token punctuation">.</span>park@kakaka<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
사용자에게 메일을 전송합니다 <span class="token punctuation">:</span> sunny<span class="token operator">&lt;</span>sunny<span class="token punctuation">.</span>sunny@mamamam<span class="token punctuation">.</span>co<span class="token punctuation">.</span>kr<span class="token operator">&gt;</span>
</code></pre></div><ul><li>func 키워드와 함수 이름 사이의 매개변수는 수신자(receiver)라고 부르며, 함수를 특정 타입에 바인딩하는 역할을 담당한다.</li> <li>이런걸 메소드라고 부른다.</li> <li>Go에서는 값 수신자와 포인터 수신자를 지원해준다.</li> <li>notify()는 값 수신자, changeEmail은 포인터 수신자이다.</li> <li>특이한건 포인터 수신자를 별다른 처리없이 실행한다는 점이다.</li> <li>Go에서 자동으로 변환해 준다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>sunny <span class="token operator">:=</span> <span class="token operator">&amp;</span>user<span class="token punctuation">{</span><span class="token string">&quot;sunny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sunny.sunny@tototata.net&quot;</span><span class="token punctuation">}</span>
<span class="token comment">// 이렇게 포인터형태를 마치 값처럼 실행해주는데</span>
sunny<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 실제론 아래와 같이 Go에서 자동 변환해준다</span>
<span class="token punctuation">(</span><span class="token operator">*</span>sunny<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>반대로 값 으로 선언된 값이 포인터 수신자에 넣어도 문제가 없다.</li> <li>마찬가지로 Go에서 자동으로 변환해 준다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>ted <span class="token operator">:=</span> user<span class="token punctuation">{</span><span class="token string">&quot;ted&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ted.park@dododada.net&quot;</span><span class="token punctuation">}</span>

<span class="token comment">// 값을 포인터 수신자를 호출한다. 이런건 Go에서 자동으로</span>
ted<span class="token punctuation">.</span><span class="token function">changeEmail</span><span class="token punctuation">(</span><span class="token string">&quot;ted.park@kakaka.com&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 변환해준다.</span>
<span class="token punctuation">(</span><span class="token operator">*</span>ted<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">changeEmail</span><span class="token punctuation">(</span><span class="token string">&quot;ted.park@kakaka.com&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_3-타입의-본질"><a href="#_3-타입의-본질" class="header-anchor">#</a> 3. 타입의 본질</h2> <h3 id="_3-1-내장-타입"><a href="#_3-1-내장-타입" class="header-anchor">#</a> 3-1. 내장 타입</h3> <ul><li>내장 타입은 언어 차원에서 지원되는 타입들</li> <li>원시타입을 선언하면 해당 값을 변경하거나 추가하면 새로운 값이 할당되어 생성된다.</li></ul> <h3 id="_3-2-참조-타입"><a href="#_3-2-참조-타입" class="header-anchor">#</a> 3-2. 참조 타입</h3> <ul><li>Go의 참조타입으로는 슬라이스, 맵, 채널, 인터페이스, 함수타입 등이 있다.</li> <li>이러한 타입의 변수를 선언하면 헤더값이라고 불리는 값이 생성된다.</li> <li>참조 타입을 위한 헤더 값들은 기반 데이터 구조에 대한 포인터를 가지고 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> IP <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
</code></pre></div><ul><li>바이트 슬라이스를 기초로한 IP 타입</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>ip IP<span class="token punctuation">)</span> <span class="token function">MarshalText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token operator">!=</span> IPv4len <span class="token operator">&amp;&amp;</span> <span class="token function">len</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token operator">!=</span> IPv6len <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AddrError<span class="token punctuation">{</span>Err<span class="token punctuation">:</span> <span class="token string">&quot;invalid IP address&quot;</span><span class="token punctuation">,</span> Addr<span class="token punctuation">:</span> <span class="token function">hexString</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>ip<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>참조 타입의 값을 공유 할 것이 아니므로 값 수신자를 사용해서 선언했다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ipEmptyString</span><span class="token punctuation">(</span>ip IP<span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ip<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>함수에도 동일하게 적용된다.</li> <li>해당 함수에 값을 넣어도 값의 복사본이 들어가, 기존 참조값들은 변하지 않는다.</li></ul> <h3 id="_3-3-구조체-타입"><a href="#_3-3-구조체-타입" class="header-anchor">#</a> 3-3. 구조체 타입</h3> <ul><li>구조체 타입을 이용하면 기본형(primitive) 또는 비기본형 성질을 모두 가질 수 있다.</li> <li>아래는 표준 라이브러리의 time</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Time <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    <span class="token comment">// UTC 기준 0001년 1월 1일 00:00:00 부터 지금까지 흘러온 시간을 초로 표현</span>
    set <span class="token builtin">int64</span>

    <span class="token comment">// Second가 표현하는 초의 오프셋을 나노초로 표현</span>
    nsec <span class="token builtin">int32</span>

    <span class="token comment">// 지역정보 저장</span>
    loc <span class="token operator">*</span>Location
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Now() 함수를 살펴보면</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Time <span class="token punctuation">{</span>
	sec<span class="token punctuation">,</span> nsec<span class="token punctuation">,</span> mono <span class="token operator">:=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	mono <span class="token operator">-=</span> startNano
	sec <span class="token operator">+=</span> unixToInternal <span class="token operator">-</span> minWall
	<span class="token keyword">if</span> <span class="token function">uint64</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token number">33</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> Time<span class="token punctuation">{</span><span class="token function">uint64</span><span class="token punctuation">(</span>nsec<span class="token punctuation">)</span><span class="token punctuation">,</span> sec <span class="token operator">+</span> minWall<span class="token punctuation">,</span> Local<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> Time<span class="token punctuation">{</span>hasMonotonic <span class="token operator">|</span> <span class="token function">uint64</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>nsecShift <span class="token operator">|</span> <span class="token function">uint64</span><span class="token punctuation">(</span>nsec<span class="token punctuation">)</span><span class="token punctuation">,</span> mono<span class="token punctuation">,</span> Local<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Time 타입의 값을 생성한 후 그 복사본을 함수 호출자에게 리턴한다.</li> <li>즉 포인터는 전혀 사용하지 않음</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>t Time<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>d Duration<span class="token punctuation">)</span> Time <span class="token punctuation">{</span>
	dsec <span class="token operator">:=</span> <span class="token function">int64</span><span class="token punctuation">(</span>d <span class="token operator">/</span> <span class="token number">1e9</span><span class="token punctuation">)</span>
	nsec <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">nsec</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">int32</span><span class="token punctuation">(</span>d<span class="token operator">%</span><span class="token number">1e9</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> nsec <span class="token operator">&gt;=</span> <span class="token number">1e9</span> <span class="token punctuation">{</span>
		dsec<span class="token operator">++</span>
		nsec <span class="token operator">-=</span> <span class="token number">1e9</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> nsec <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		dsec<span class="token operator">--</span>
		nsec <span class="token operator">+=</span> <span class="token number">1e9</span>
	<span class="token punctuation">}</span>
	t<span class="token punctuation">.</span>wall <span class="token operator">=</span> t<span class="token punctuation">.</span>wall<span class="token operator">&amp;^</span>nsecMask <span class="token operator">|</span> <span class="token function">uint64</span><span class="token punctuation">(</span>nsec<span class="token punctuation">)</span> <span class="token comment">// update nsec</span>
	t<span class="token punctuation">.</span><span class="token function">addSec</span><span class="token punctuation">(</span>dsec<span class="token punctuation">)</span>
	<span class="token keyword">if</span> t<span class="token punctuation">.</span>wall<span class="token operator">&amp;</span>hasMonotonic <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
		te <span class="token operator">:=</span> t<span class="token punctuation">.</span>ext <span class="token operator">+</span> <span class="token function">int64</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span>
		<span class="token keyword">if</span> d <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> te <span class="token operator">&gt;</span> t<span class="token punctuation">.</span>ext <span class="token operator">||</span> d <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> te <span class="token operator">&lt;</span> t<span class="token punctuation">.</span>ext <span class="token punctuation">{</span>
			<span class="token comment">// Monotonic clock reading now out of range; degrade to wall-only.</span>
			t<span class="token punctuation">.</span><span class="token function">stripMono</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span>ext <span class="token operator">=</span> te
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> t
<span class="token punctuation">}</span>
</code></pre></div><ul><li>값 수신자를 활용한 Time 타입의 기본형 성격이다.</li> <li>역시나 복사본을 리턴해주는 형식이다.</li> <li>비 기본형을 성격을 갖는 구조체 또한 존재한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> File <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token operator">*</span>file <span class="token comment">// os specific</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> file <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	pfd         poll<span class="token punctuation">.</span>FD
	name        <span class="token builtin">string</span>
	dirinfo     <span class="token operator">*</span>dirInfo <span class="token comment">// nil unless directory being read</span>
	nonblock    <span class="token builtin">bool</span>     <span class="token comment">// whether we set nonblocking mode</span>
	stdoutOrErr <span class="token builtin">bool</span>     <span class="token comment">// whether this is stdout or stderr</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>file은 *File 타입을 표현한다.</li> <li>이렇게 간접적으로 파일에 접근함으로써 os 패키지의 클라이언트가 데이터를 덮어쓰지 못하도록한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Open</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> O_RDONLY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Open 함수를 보면, 함수의 호출자와 File 타입을 공유하기 위해 포인터를 사용하고 있다.</li> <li>Open 함수는 File 타입의 값을 생성한 후 그에 대한 포인터를 리턴한다.</li> <li>즉 리턴된 값의 본질이 비기본형이라는 뜻</li></ul> <hr> <ul><li>메소드를 정의 할 때, 값 수신자와 포인터 수신자중 어떤 것을 쓸지는 메소드에서 값을 변경하는지 여부와는 상관이 없다.</li> <li>넘기는 값의 본질에 따라서 값 수신자 / 포인터 수신자를 결정해야 한다.</li></ul> <h2 id="_4-인터페이스"><a href="#_4-인터페이스" class="header-anchor">#</a> 4. 인터페이스</h2> <h3 id="_4-1-표준-라이브러리"><a href="#_4-1-표준-라이브러리" class="header-anchor">#</a> 4-1. 표준 라이브러리</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;io&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">2</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;사용법 : ./interfaceExample &lt;url&gt;&quot;</span><span class="token punctuation">)</span>
		os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	r<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	io<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> r<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> r<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>인터페이스를 활용하는 예제</li> <li>io.Copy같은 경우 두 번째 인자로 Reader 인터페이스 값을 받는다.</li> <li>r.Body는 Reader 인터페이스를 구현하고 있어서, 자연스럽게 대입이 가능하다.</li></ul> <h3 id="_4-2-인터페이스의-구현-기법"><a href="#_4-2-인터페이스의-구현-기법" class="header-anchor">#</a> 4-2. 인터페이스의 구현 기법</h3> <ul><li>인터페이스는 단지 행위를 선언하기 위한 타입</li> <li>사용자 정의 타입이 인터페이스 타입에 선언된 메소드를 구현하면, 이 사용자 정의 타입 값은 인터페이스 타입의 값에 대입하여 활용할 수 있다.</li> <li>그렇게 선언된 구조체 타입은 해당 인터페이스 값에 대입하여 사용이 가능하다.</li> <li>타언어와 비슷하게 인터페이스는 다형성을 지원한다.</li></ul> <h3 id="_4-3-메소드-집합"><a href="#_4-3-메소드-집합" class="header-anchor">#</a> 4-3. 메소드 집합</h3> <ul><li>메소드 집합은 인터페이스를 준수하는 것과 관련된 규칙들을 정의한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> notifier <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	jinny <span class="token operator">:=</span> user<span class="token punctuation">{</span>
		name<span class="token punctuation">:</span> <span class="token string">&quot;jinny.jinny&quot;</span><span class="token punctuation">,</span>
		email<span class="token punctuation">:</span> <span class="token string">&quot;jinny.jinny@porori.com&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token function">sendNotification</span><span class="token punctuation">(</span>jinny<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span>n notifier<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	n<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>위의 소스는 sendNotification(jinny)에서 컴파일 에러가 발생한다.</li> <li>user 구조체는 포인터 수신자로 notify를 구현한다.</li> <li>즉 sendNotification에 값형태의 user구조체를 넣어서, n.notify()에서 n이 포인터 형태가 와야되서 에러가 발생한다.</li> <li>이러한 규칙을 알기 위해선 <em>메소드 집합</em>을 이해해야 한다.</li> <li>메소드 집합은 주어진 타입 값이나 포인터와 관련된 메소드 집합을 정의하는데, 이때 수신자의 종류에 따라 메소드가 값에 관련된건지, 포인터에 관련된건지, 아니면 둘다 관련된건지를 결정한다.</li></ul> <table><thead><tr><th>값</th> <th>메소드 수신자</th></tr></thead> <tbody><tr><td>T</td> <td>(t T)</td></tr> <tr><td>*T</td> <td>(t T), (t *T)</td></tr></tbody></table> <ul><li>위의 표는 메소드 수신자에 넣을 수 있는 값의 형태이다.</li> <li>바꿔서 적어보면</li></ul> <table><thead><tr><th>메소드 수신자</th> <th>값</th></tr></thead> <tbody><tr><td>(t T)</td> <td>T와 *T</td></tr> <tr><td>(t *T)</td> <td>*T</td></tr></tbody></table> <ul><li>즉 인터페이스의 메소드를 구현할 때, 값 수신자로 메소드를 구현하면 입력값으로 포인터가오건 값이오건 상관이 없고, 포인터 수신자로 메신저를 구현하면 입력값은 반드시 포인터 여야 한다.</li> <li>그래서 위의 코드는 인터페이스의 메소드를 구현할때 (u *user) 로 포인터 수신자를 구현했기 때문에 값을 넣을 때 에러가 난다.</li> <li>수정을 하려면 포인터 수신자를 값 수신자로 바꾸거나, 대입하는 user 구조체 값을 포인터 주소값으로 넘겨 주어야한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

를

<span class="token keyword">func</span> <span class="token punctuation">(</span>u user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

로 변경
</code></pre></div><ul><li>또는</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">sendNotification</span><span class="token punctuation">(</span>jinny<span class="token punctuation">)</span>

이렇게 넘겨주던걸

<span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>jinny<span class="token punctuation">)</span>

로 넘겨주면 된다<span class="token punctuation">.</span>
</code></pre></div><ul><li>이렇게 제약을 걸어놓은 이유는 상황에 따라 값의 주소를 알 수가 없을수도 있기 떄문이다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> duration <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>duration<span class="token punctuation">)</span> <span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;기간 : %d&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>d<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">//src/github.com/gwegwe1234/go-in-action/chapter5/listing64.go:12:14: cannot call pointer method on duration(42)</span>
	<span class="token comment">//src/github.com/gwegwe1234/go-in-action/chapter5/listing64.go:12:14: cannot take the address of duration(42)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>위의 예시처럼 특정값에 대한 주소를 알 수가 없을 때도 있을 수 있다.</li></ul> <h3 id="_4-4-다형성"><a href="#_4-4-다형성" class="header-anchor">#</a> 4-4. 다형성</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> notifier <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>admin<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;어드민에게 메세지를 전달합니다. : %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메세지를 전달합니다. : %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	jade <span class="token operator">:=</span> user<span class="token punctuation">{</span><span class="token string">&quot;jade.jjj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jade.jjj@kikiki.com&quot;</span><span class="token punctuation">}</span>
	judy <span class="token operator">:=</span> admin<span class="token punctuation">{</span><span class="token string">&quot;judy.jucie&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;judy.juice@qwert.com&quot;</span><span class="token punctuation">}</span>

	<span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>jade<span class="token punctuation">)</span>
	<span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>judy<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span>n notifier<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	n<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

결과 <span class="token punctuation">:</span> 
사용자에게 메세지를 전달합니다<span class="token punctuation">.</span> <span class="token punctuation">:</span> jade<span class="token punctuation">.</span>jjj<span class="token operator">&lt;</span>jade<span class="token punctuation">.</span>jjj@kikiki<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
어드민에게 메세지를 전달합니다<span class="token punctuation">.</span> <span class="token punctuation">:</span> judy<span class="token punctuation">.</span>jucie<span class="token operator">&lt;</span>judy<span class="token punctuation">.</span>juice@qwert<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
</code></pre></div><ul><li>위의 예시처럼 admin 과 user 구조체는 둘다 notify를 구현했기 때문에, notifier 타입을 값으로 받는 sendNotification에 사용할 수 있다. -&gt; 다형성</li></ul> <h2 id="_5-타입-임베딩"><a href="#_5-타입-임베딩" class="header-anchor">#</a> 5. 타입 임베딩</h2> <ul><li>Go 에서는 기존의 타입을 확장하거나 그 동작을 변경하는 것이 가능하다.</li> <li>타입 임베딩이라고 부르는데, 기존에 선언된 타입을 새로운 구조체 타입의 내부에 선언하는 것</li> <li>이렇게 포함된 타입은 새로운 외부타입, 내부타입 으로 활용된다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 타입 임베딩을 이용해 다른 타입을 포함하는 방법과</span>
<span class="token comment">// 이 경우 내부 및 외부 타입의 관계를 확인하기 위한 예제 프로그램</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	user
	level <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// admin 타입의 사용자를 생성</span>
	bennie <span class="token operator">:=</span> admin <span class="token punctuation">{</span>
		user <span class="token punctuation">:</span> user<span class="token punctuation">{</span>
			name <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru&quot;</span><span class="token punctuation">,</span>
			email <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru@ddeokboggi.com&quot;</span><span class="token punctuation">,</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		level <span class="token punctuation">:</span> <span class="token string">&quot;super&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 내부 타입의 메소드를 바로 호출할 수 있다.</span>
	bennie<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 내부 타입의 메소드가 승격 되었다.</span>
	bennie<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>user 타입은 admin 타입의 내부 타입으로 포함된다.</li> <li>bennie는 값으로 선언되었지만, 내부 user는 참조형이므로, notify()가 포인터 수신자여도 문제없이 호출이 가능하다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 인터페이스와 임베딩의 관계를 설명하기 위한 예제</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> notifier <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	user
	level <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// admin 타입의 사용자를 생성</span>
	bennie <span class="token operator">:=</span> admin <span class="token punctuation">{</span>
		user <span class="token punctuation">:</span> user<span class="token punctuation">{</span>
			name <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru&quot;</span><span class="token punctuation">,</span>
			email <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru@ddeokboggi.com&quot;</span><span class="token punctuation">,</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		level <span class="token punctuation">:</span> <span class="token string">&quot;super&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 이 경우 포함된 내부 타입이 구현한 인터페이스가 외부 타입으로 승격된다.</span>
	<span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>bennie<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span>n notifier<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	n<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>인터페이스를 적용한 부분인데, 가장 특이한 부분은 sendNotification(&amp;bennie) 부분이다.</li> <li>외부 타입인 admin 타입의 변수 bennie를 선언하고, 외부 타입의 변수의주소를 sendNotification 에 인자로 넣어주었다.</li> <li>코드를 보면, admin은 인터페이스를 구현하지 않았는데 문제없이 컴파일이 된다.</li> <li>즉 내부타입이 인터페이스를 구현했으면, 외부타입도 해당 인터페이스를 구현한 거처럼 취급을 한다.</li> <li>그래서 인터페이스를 구현안한 admin 타입읙 값을 n notifier에 대입을 할 수 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> notifier <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>user<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;사용자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	user
	level <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>admin<span class="token punctuation">)</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;관리자에게 메일을 전송합니다: %s&lt;%s&gt;\n&quot;</span><span class="token punctuation">,</span> u<span class="token punctuation">.</span>name<span class="token punctuation">,</span> u<span class="token punctuation">.</span>email<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// admin 타입의 사용자를 생성</span>
	bennie <span class="token operator">:=</span> admin <span class="token punctuation">{</span>
		user <span class="token punctuation">:</span> user<span class="token punctuation">{</span>
			name <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru&quot;</span><span class="token punctuation">,</span>
			email <span class="token punctuation">:</span> <span class="token string">&quot;bennie.maru@ddeokboggi.com&quot;</span><span class="token punctuation">,</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		level <span class="token punctuation">:</span> <span class="token string">&quot;super&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 이 경우 포함된 내부 타입이 구현한 인터페이스가 외부 타입으로 승격되지 않는다</span>
	<span class="token function">sendNotification</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>bennie<span class="token punctuation">)</span>

	<span class="token comment">// 내부 메소드에 직접 접근할 수 있다.</span>
	bennie<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 이 경우 내부 타입의 메소드가 승격되지 않는다</span>
	bennie<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">sendNotification</span><span class="token punctuation">(</span>n notifier<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	n<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

결과 <span class="token punctuation">:</span> 
관리자에게 메일을 전송합니다<span class="token punctuation">:</span> bennie<span class="token punctuation">.</span>maru<span class="token operator">&lt;</span>bennie<span class="token punctuation">.</span>maru@ddeokboggi<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
사용자에게 메일을 전송합니다<span class="token punctuation">:</span> bennie<span class="token punctuation">.</span>maru<span class="token operator">&lt;</span>bennie<span class="token punctuation">.</span>maru@ddeokboggi<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
관리자에게 메일을 전송합니다<span class="token punctuation">:</span> bennie<span class="token punctuation">.</span>maru<span class="token operator">&lt;</span>bennie<span class="token punctuation">.</span>maru@ddeokboggi<span class="token punctuation">.</span>com<span class="token operator">&gt;</span>
</code></pre></div><ul><li>이런식으로 외부 타입인 admin이 notifier를 직접 구현하면, 직접 접근할 땐 내부 타입의 메소드로 접근이 안된다.</li> <li>내부에 접근하고싶으면 내부타입을 한번 참조하고, 메소드를 접근해야 한다.</li></ul> <h2 id="_6-외부-노출-식별자와-비노출-식별자"><a href="#_6-외부-노출-식별자와-비노출-식별자" class="header-anchor">#</a> 6. 외부 노출 식별자와 비노출 식별자</h2> <ul><li>Go는 외부 노출 식별자와, 비노출 식별자를 지원한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> counters

<span class="token comment">// 알림 횟수를 저장하기 위한 정수 값을 저장하는 alertCounter 타입을 비노출 타입으로 선언</span>

<span class="token keyword">type</span> alertCounter <span class="token builtin">int</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 다음 패키지에서 비노출 식별자에 대한 접근이 차단되는것을 보여주기 위한 프로그램</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/gwegwe1234/go-in-action/chapter5/counters&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	counter <span class="token operator">:=</span> counters<span class="token punctuation">.</span><span class="token function">alertCounter</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
	<span class="token comment">//src/github.com/gwegwe1234/go-in-action/chapter5/counterMain.go:10:13: cannot refer to unexported name counters.alertCounter</span>
	<span class="token comment">//src/github.com/gwegwe1234/go-in-action/chapter5/counterMain.go:10:13: undefined: counters.alertCounter</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>식별자 이름을 소문자로 시작하면 이 식별자는 패키지 외부에 노출되지 않는다.</li> <li>반대로 식별자의 이름을 대문자로 시작하면 외부에 노출된다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> counters

<span class="token comment">// 알림 횟수를 저장하기 위한 정수 값을 저장하는 alertCounter 타입을 비노출 타입으로 선언</span>
<span class="token keyword">type</span> alertCounter <span class="token builtin">int</span>

<span class="token comment">// New라는 함수로 alertCounter 타입을 리턴한다.</span>
<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span>value <span class="token builtin">int</span><span class="token punctuation">)</span> alertCounter <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">alertCounter</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 다음 패키지에서 외부 노출 식별자에 대한 접근이 차단되는것을 보여주기 위한 프로그램</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/gwegwe1234/go-in-action/chapter5/counters&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	counter <span class="token operator">:=</span> counters<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>New라는 외부 노출 함수를 생성해, main 함수에서 alertCounter 타입을 가져올 수 있도록 추가함</li> <li>이런 규칙이 구조체 타입의 필드에 적용될때는 어떻게 될까?</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> entities

<span class="token comment">// 외부에 노출된 User 구조체 생성</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	email <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/gwegwe1234/go-in-action/chapter5/entities&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	<span class="token comment">// entities 패키지내의 User 구조체 가져온다.</span>

	riley <span class="token operator">:=</span> entities<span class="token punctuation">.</span>User<span class="token punctuation">{</span>
		Name <span class="token punctuation">:</span> <span class="token string">&quot;Riley.life&quot;</span><span class="token punctuation">,</span>
		email <span class="token punctuation">:</span> <span class="token string">&quot;Riley.life@email.com&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>riley<span class="token punctuation">)</span>
	
	<span class="token comment">// entitiesMain.go:13:3: unknown field 'email' in struct literal of type entities.User</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>User 구조체내부에 email이 비노출 필드여서 접근이 안된다.</li> <li>마지막으로 구조체 내부에 구조체가 있을때 비노출, 노출 필드가 어떻게 돌아가는지 보면</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> entities

<span class="token comment">// 외부에 노출된 User 구조체 생성</span>
<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Email <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Admin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	user
	Rights <span class="token builtin">int</span>
<span class="token punctuation">}</span> 
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/webgenie/go-in-action/chapter5/listing74/entities&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> entities<span class="token punctuation">.</span>Admin<span class="token punctuation">{</span>
		Rights<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 비노출 타입인 내부 타입의 노출 타입 필드를 세팅</span>
	a<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span>
	a<span class="token punctuation">.</span>Email <span class="token operator">=</span> <span class="token string">&quot;Email&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Email<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Rights<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>user는 비노출 타입이지만, 외부로 노출된 Admin 구조체로 선언해서, 노출 필드 값을 설정해주면 접근이 가능하다.</li> <li>물론 Admin 구조체를 선언 할 때 리터럴로 초기값을 넣어주려고 하면 안됨.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-collection/book/go-in-action/04.html" class="prev">4장 배열, 슬라이스, 맵</a></span> <span class="next"><a href="/study-collection/book/go-in-action/06.html">6장 동시성</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-collection/assets/js/app.714457d4.js" defer></script><script src="/study-collection/assets/js/2.98af7b00.js" defer></script><script src="/study-collection/assets/js/104.2c477af4.js" defer></script>
  </body>
</html>
