<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>9강 | 끄적끄적 블로그</title>
    <meta name="description" content="개발 관련 블로그">
    <link rel="icon" href="/study-collection/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    
    <link rel="preload" href="/study-collection/assets/css/0.styles.48760978.css" as="style"><link rel="preload" href="/study-collection/assets/js/app.38d06f6c.js" as="script"><link rel="preload" href="/study-collection/assets/js/2.ad275ace.js" as="script"><link rel="preload" href="/study-collection/assets/js/66.c577faf6.js" as="script"><link rel="prefetch" href="/study-collection/assets/js/10.c84631d5.js"><link rel="prefetch" href="/study-collection/assets/js/100.18e5b70e.js"><link rel="prefetch" href="/study-collection/assets/js/101.54017f8a.js"><link rel="prefetch" href="/study-collection/assets/js/102.58109b08.js"><link rel="prefetch" href="/study-collection/assets/js/103.ed2c83d9.js"><link rel="prefetch" href="/study-collection/assets/js/104.d38d361e.js"><link rel="prefetch" href="/study-collection/assets/js/105.09b7e841.js"><link rel="prefetch" href="/study-collection/assets/js/106.8af7f0dd.js"><link rel="prefetch" href="/study-collection/assets/js/107.64bafa6a.js"><link rel="prefetch" href="/study-collection/assets/js/108.0f997f0f.js"><link rel="prefetch" href="/study-collection/assets/js/109.33636891.js"><link rel="prefetch" href="/study-collection/assets/js/11.5c8aa7d9.js"><link rel="prefetch" href="/study-collection/assets/js/110.7c09157a.js"><link rel="prefetch" href="/study-collection/assets/js/111.86cbd87c.js"><link rel="prefetch" href="/study-collection/assets/js/112.d4b6d79c.js"><link rel="prefetch" href="/study-collection/assets/js/113.40be0606.js"><link rel="prefetch" href="/study-collection/assets/js/114.23d684f8.js"><link rel="prefetch" href="/study-collection/assets/js/115.b9be37db.js"><link rel="prefetch" href="/study-collection/assets/js/116.cf9c3c6b.js"><link rel="prefetch" href="/study-collection/assets/js/117.43dc9a45.js"><link rel="prefetch" href="/study-collection/assets/js/118.50d39df8.js"><link rel="prefetch" href="/study-collection/assets/js/119.98b2e338.js"><link rel="prefetch" href="/study-collection/assets/js/12.ec9cfa9e.js"><link rel="prefetch" href="/study-collection/assets/js/120.2f7594a7.js"><link rel="prefetch" href="/study-collection/assets/js/121.6a4141e3.js"><link rel="prefetch" href="/study-collection/assets/js/122.47fbaca5.js"><link rel="prefetch" href="/study-collection/assets/js/123.36b17659.js"><link rel="prefetch" href="/study-collection/assets/js/124.a96ef908.js"><link rel="prefetch" href="/study-collection/assets/js/125.0600b236.js"><link rel="prefetch" href="/study-collection/assets/js/126.fc450c34.js"><link rel="prefetch" href="/study-collection/assets/js/127.ab4e5006.js"><link rel="prefetch" href="/study-collection/assets/js/128.688fbeaf.js"><link rel="prefetch" href="/study-collection/assets/js/129.d10f46b4.js"><link rel="prefetch" href="/study-collection/assets/js/13.e70f499e.js"><link rel="prefetch" href="/study-collection/assets/js/130.43566a02.js"><link rel="prefetch" href="/study-collection/assets/js/131.cd96e655.js"><link rel="prefetch" href="/study-collection/assets/js/132.9882ba07.js"><link rel="prefetch" href="/study-collection/assets/js/133.17365417.js"><link rel="prefetch" href="/study-collection/assets/js/134.39ba94fb.js"><link rel="prefetch" href="/study-collection/assets/js/135.126f1200.js"><link rel="prefetch" href="/study-collection/assets/js/136.198022e3.js"><link rel="prefetch" href="/study-collection/assets/js/137.66620582.js"><link rel="prefetch" href="/study-collection/assets/js/138.74ce7ca2.js"><link rel="prefetch" href="/study-collection/assets/js/139.e8dcd9f4.js"><link rel="prefetch" href="/study-collection/assets/js/14.10ac6452.js"><link rel="prefetch" href="/study-collection/assets/js/140.76117985.js"><link rel="prefetch" href="/study-collection/assets/js/141.2a88a006.js"><link rel="prefetch" href="/study-collection/assets/js/15.e9bbb0ee.js"><link rel="prefetch" href="/study-collection/assets/js/16.c34c06d6.js"><link rel="prefetch" href="/study-collection/assets/js/17.34574203.js"><link rel="prefetch" href="/study-collection/assets/js/18.332385ee.js"><link rel="prefetch" href="/study-collection/assets/js/19.6cbf810b.js"><link rel="prefetch" href="/study-collection/assets/js/20.55a39e3a.js"><link rel="prefetch" href="/study-collection/assets/js/21.525f7645.js"><link rel="prefetch" href="/study-collection/assets/js/22.93da1139.js"><link rel="prefetch" href="/study-collection/assets/js/23.c634f52e.js"><link rel="prefetch" href="/study-collection/assets/js/24.fab6c439.js"><link rel="prefetch" href="/study-collection/assets/js/25.ce272d43.js"><link rel="prefetch" href="/study-collection/assets/js/26.9da5632a.js"><link rel="prefetch" href="/study-collection/assets/js/27.c2e7f666.js"><link rel="prefetch" href="/study-collection/assets/js/28.9b7f1328.js"><link rel="prefetch" href="/study-collection/assets/js/29.e07e580f.js"><link rel="prefetch" href="/study-collection/assets/js/3.321f320c.js"><link rel="prefetch" href="/study-collection/assets/js/30.4062568d.js"><link rel="prefetch" href="/study-collection/assets/js/31.ee722461.js"><link rel="prefetch" href="/study-collection/assets/js/32.fef5db91.js"><link rel="prefetch" href="/study-collection/assets/js/33.9694d130.js"><link rel="prefetch" href="/study-collection/assets/js/34.aa6c7097.js"><link rel="prefetch" href="/study-collection/assets/js/35.57b4e50f.js"><link rel="prefetch" href="/study-collection/assets/js/36.4819f30a.js"><link rel="prefetch" href="/study-collection/assets/js/37.9e7dd9e0.js"><link rel="prefetch" href="/study-collection/assets/js/38.c87523bf.js"><link rel="prefetch" href="/study-collection/assets/js/39.05575e17.js"><link rel="prefetch" href="/study-collection/assets/js/4.a1cdf2e4.js"><link rel="prefetch" href="/study-collection/assets/js/40.cbd6856d.js"><link rel="prefetch" href="/study-collection/assets/js/41.ade5f567.js"><link rel="prefetch" href="/study-collection/assets/js/42.2856a875.js"><link rel="prefetch" href="/study-collection/assets/js/43.5416ebd4.js"><link rel="prefetch" href="/study-collection/assets/js/44.39f2951d.js"><link rel="prefetch" href="/study-collection/assets/js/45.280f4af4.js"><link rel="prefetch" href="/study-collection/assets/js/46.6bb42de0.js"><link rel="prefetch" href="/study-collection/assets/js/47.ecb75da0.js"><link rel="prefetch" href="/study-collection/assets/js/48.aafc2e85.js"><link rel="prefetch" href="/study-collection/assets/js/49.228857e9.js"><link rel="prefetch" href="/study-collection/assets/js/5.3be4af64.js"><link rel="prefetch" href="/study-collection/assets/js/50.ea44c84c.js"><link rel="prefetch" href="/study-collection/assets/js/51.e96460f9.js"><link rel="prefetch" href="/study-collection/assets/js/52.959b847a.js"><link rel="prefetch" href="/study-collection/assets/js/53.453efb6a.js"><link rel="prefetch" href="/study-collection/assets/js/54.ea363a60.js"><link rel="prefetch" href="/study-collection/assets/js/55.5858df6c.js"><link rel="prefetch" href="/study-collection/assets/js/56.0da1b6bb.js"><link rel="prefetch" href="/study-collection/assets/js/57.489163ad.js"><link rel="prefetch" href="/study-collection/assets/js/58.86458be6.js"><link rel="prefetch" href="/study-collection/assets/js/59.108c1c33.js"><link rel="prefetch" href="/study-collection/assets/js/6.3e20666a.js"><link rel="prefetch" href="/study-collection/assets/js/60.e8998a84.js"><link rel="prefetch" href="/study-collection/assets/js/61.5ab3e00c.js"><link rel="prefetch" href="/study-collection/assets/js/62.96b81e47.js"><link rel="prefetch" href="/study-collection/assets/js/63.ea7a0ad9.js"><link rel="prefetch" href="/study-collection/assets/js/64.12ba0b0a.js"><link rel="prefetch" href="/study-collection/assets/js/65.7c665060.js"><link rel="prefetch" href="/study-collection/assets/js/67.72d2b7d3.js"><link rel="prefetch" href="/study-collection/assets/js/68.8e4a0f51.js"><link rel="prefetch" href="/study-collection/assets/js/69.0d4db0a4.js"><link rel="prefetch" href="/study-collection/assets/js/7.8cb709b8.js"><link rel="prefetch" href="/study-collection/assets/js/70.a552d798.js"><link rel="prefetch" href="/study-collection/assets/js/71.52bbfaf3.js"><link rel="prefetch" href="/study-collection/assets/js/72.7b290589.js"><link rel="prefetch" href="/study-collection/assets/js/73.548cbd2b.js"><link rel="prefetch" href="/study-collection/assets/js/74.7e8ff97d.js"><link rel="prefetch" href="/study-collection/assets/js/75.9986b450.js"><link rel="prefetch" href="/study-collection/assets/js/76.e2e0e9ad.js"><link rel="prefetch" href="/study-collection/assets/js/77.befc7a4f.js"><link rel="prefetch" href="/study-collection/assets/js/78.4e738d60.js"><link rel="prefetch" href="/study-collection/assets/js/79.e505e151.js"><link rel="prefetch" href="/study-collection/assets/js/8.e4e11989.js"><link rel="prefetch" href="/study-collection/assets/js/80.66affebf.js"><link rel="prefetch" href="/study-collection/assets/js/81.62a77dfb.js"><link rel="prefetch" href="/study-collection/assets/js/82.18860708.js"><link rel="prefetch" href="/study-collection/assets/js/83.0c59e64f.js"><link rel="prefetch" href="/study-collection/assets/js/84.377ad08c.js"><link rel="prefetch" href="/study-collection/assets/js/85.8d17568a.js"><link rel="prefetch" href="/study-collection/assets/js/86.c47abef2.js"><link rel="prefetch" href="/study-collection/assets/js/87.618bdb94.js"><link rel="prefetch" href="/study-collection/assets/js/88.f9ed4eda.js"><link rel="prefetch" href="/study-collection/assets/js/89.9fd40023.js"><link rel="prefetch" href="/study-collection/assets/js/9.44111070.js"><link rel="prefetch" href="/study-collection/assets/js/90.64d0b7f8.js"><link rel="prefetch" href="/study-collection/assets/js/91.4c895398.js"><link rel="prefetch" href="/study-collection/assets/js/92.2af24da4.js"><link rel="prefetch" href="/study-collection/assets/js/93.f0872b65.js"><link rel="prefetch" href="/study-collection/assets/js/94.4ea7e617.js"><link rel="prefetch" href="/study-collection/assets/js/95.a9aa7a5a.js"><link rel="prefetch" href="/study-collection/assets/js/96.24912ebe.js"><link rel="prefetch" href="/study-collection/assets/js/97.020750d8.js"><link rel="prefetch" href="/study-collection/assets/js/98.f11917d4.js"><link rel="prefetch" href="/study-collection/assets/js/99.90f660e9.js">
    <link rel="stylesheet" href="/study-collection/assets/css/0.styles.48760978.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-collection/" class="home-link router-link-active"><!----> <span class="site-name">끄적끄적 블로그</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-collection/guide.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://github.com/gwegwe1234/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study-collection/guide.html" class="sidebar-link">Intro</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Book summary</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>자바 프로그래밍 면접 이렇게 준비한다</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>클린코드</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>스프링 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>고 인 액션</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study-collection/book/go-in-action/01.html" class="sidebar-link">1장 Go와의 첫 만남</a></li><li><a href="/study-collection/book/go-in-action/02.html" class="sidebar-link">2장 Go 간단히 살펴보기</a></li><li><a href="/study-collection/book/go-in-action/03.html" class="sidebar-link">3장 패키징과 내장 도구들</a></li><li><a href="/study-collection/book/go-in-action/04.html" class="sidebar-link">4장 배열, 슬라이스, 맵</a></li><li><a href="/study-collection/book/go-in-action/05.html" class="sidebar-link">5장 Go의 타입 시스템</a></li><li><a href="/study-collection/book/go-in-action/06.html" class="sidebar-link">6장 동시성</a></li><li><a href="/study-collection/book/go-in-action/07.html" class="sidebar-link">7장 동시성 패턴</a></li><li><a href="/study-collection/book/go-in-action/08.html" class="sidebar-link">8장 표준 라이브러리</a></li><li><a href="/study-collection/book/go-in-action/09.html" class="active sidebar-link">9장 테스트와 벤치마킹</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Go 언어를 활용한 마이크로서비스 개발</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>마이크로서비스 구축과 운영</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>카프카 스트림즈 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>모던 자바 인 액션</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>객체지향의 사실과 오해</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tech</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_9강"><a href="#_9강" class="header-anchor">#</a> 9강</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-단위-테스트">1. 단위 테스트</a><ul><li><a href="#_1-1-기본-단위-테스트">1-1. 기본 단위 테스트</a></li><li><a href="#_1-2-테이블-테스트">1-2. 테이블 테스트</a></li><li><a href="#_1-3-모의-호출">1-3. 모의 호출</a></li><li><a href="#_1-4-종단점-테스트">1-4. 종단점 테스트</a></li></ul></li><li><a href="#_2-예제-코드">2. 예제 코드</a></li><li><a href="#_3-벤치마킹">3. 벤치마킹</a></li><li><a href="#_4-요약">4. 요약</a></li></ul></div><p></p> <h2 id="_1-단위-테스트"><a href="#_1-단위-테스트" class="header-anchor">#</a> 1. 단위 테스트</h2> <ul><li>Go에서는 단위 테스트를 작성하는 여러가지 방법이 있다.
<ul><li><em>기본테스트</em>는 특정 코드에 단일 매개변수와 리턴 결과만을 테스트 한다.</li> <li><em>테이블테스트</em>는 여러 개의 매개변수와 리턴 결과의 조합을 테스트 한다.</li> <li>mock 객체를 만들어 테스트하는 방법도 존재한다.</li> <li>웹 서비스 개발 시에 실제로 서비스를 실해앟지 않고 서비스에 웹 요청이 들어오는 테스트도 가능하다.</li></ul></li></ul> <h3 id="_1-1-기본-단위-테스트"><a href="#_1-1-기본-단위-테스트" class="header-anchor">#</a> 1-1. 기본 단위 테스트</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> chapter9

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> checkMark <span class="token operator">=</span> <span class="token string">&quot;\u2713&quot;</span>
<span class="token keyword">const</span> ballotX <span class="token operator">=</span> <span class="token string">&quot;\u2717&quot;</span>

<span class="token keyword">func</span> <span class="token function">TestDownload</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
	url <span class="token operator">:=</span> <span class="token string">&quot;http://www.goinggo.net/feeds/posts/default?alt=rss&quot;</span>
	statusCode <span class="token operator">:=</span> <span class="token number">200</span>

	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;콘텐츠 다운로드 기능 테스트 시작!&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\tUrl \&quot;%s\&quot; 호출 시 상태 코드가 \&quot;%d\&quot;인지 확인.&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> statusCode<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인&quot;</span><span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인&quot;</span><span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>

			<span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

			<span class="token keyword">if</span> resp<span class="token punctuation">.</span>StatusCode <span class="token operator">==</span> statusCode <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t상태코드가 \&quot;%d\&quot;인지 확인 %v %v&quot;</span><span class="token punctuation">,</span> statusCode<span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">go</span> test <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token operator">=</span> RUN   TestDownload
<span class="token operator">--</span><span class="token operator">-</span> PASS<span class="token punctuation">:</span> TestDownload <span class="token punctuation">(</span><span class="token number">5.52</span>s<span class="token punctuation">)</span>
    basictest_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">15</span><span class="token punctuation">:</span> 콘텐츠 다운로드 기능 테스트 시작<span class="token operator">!</span>
    basictest_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">17</span><span class="token punctuation">:</span>       Url <span class="token string">&quot;http://www.goinggo.net/feeds/posts/default?alt=rss&quot;</span> 호출 시 상태 코드가 <span class="token string">&quot;200&quot;</span>인지 확인<span class="token punctuation">.</span>
    basictest_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">:</span>               HTTP GET 요청을 보냈는지 확인 ✓
    basictest_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">28</span><span class="token punctuation">:</span>               상태코드가 <span class="token string">&quot;200&quot;</span>인지 확인 ✗ <span class="token number">200</span>
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9     <span class="token number">5.537</span>s

</code></pre></div><ul><li>테스트를 실행 할 땐 go test -v 를 친다.</li> <li>고에선 _test.go 라고 된 파일만 테스트 파일로 간주한다.</li> <li>testing 패키지는 테스트 프레임워크부터 테스트의 결과를 출력하고 보고하기 위한 모든 것을 제공하낟.</li> <li>테스트 함수는 반드시 외부 공개(대문자로시작) 함수여야 한다.</li> <li>각 테스트 함수는 해당 테스트가 어떤 이유에서 필요한지 서술해야한다.</li> <li>그 다음엔 언제 어떻게 코드가 테스트가 될 것인지 서술해야 한다.</li> <li>테스트가 성공했건 실패 했건 테스트의 결과가 어떤지 서술해주어야 한다.</li> <li>x나 checkbox 표시를 해주도록 하자.</li></ul> <h3 id="_1-2-테이블-테스트"><a href="#_1-2-테이블-테스트" class="header-anchor">#</a> 1-2. 테이블 테스트</h3> <ul><li>각기 다른 매개변수에 대해 각기 다른 결과를 리턴하는 코드를 테스트할 때는 테이블 테스트를 사용한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 테이블 테스트를 설명하기 위한 예제</span>
<span class="token keyword">package</span> chapter9

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> checkMark <span class="token operator">=</span> <span class="token string">&quot;\u2713&quot;</span>
<span class="token keyword">const</span> ballotX <span class="token operator">=</span> <span class="token string">&quot;\u2717&quot;</span>

<span class="token comment">// TestDownload 함수는 HTTP GET 함수를 이용해 콘텐츠를 다운로드하고</span>
<span class="token comment">// 각기 다른 결과 상태를 확인한다.</span>
<span class="token keyword">func</span> <span class="token function">TestDownload</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
		url        <span class="token builtin">string</span>
		statusCode <span class="token builtin">int</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;http://www.goinggo.net/feeds/posts/default?alt=rss&quot;</span><span class="token punctuation">,</span>
			http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token string">&quot;http://rss.cnn.com/rss/cnn_topstbadurl.rss&quot;</span><span class="token punctuation">,</span>
			http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;각각 다른 콘텐츠에 대한 다운로드를 확인한다.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> u <span class="token operator">:=</span> <span class="token keyword">range</span> urls <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\tURL \&quot;%s\&quot; 호출시 상태 코드가 \&quot;%d\&quot;인지 확인.&quot;</span><span class="token punctuation">,</span>
				u<span class="token punctuation">.</span>url<span class="token punctuation">,</span> u<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
				<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
					t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인.&quot;</span><span class="token punctuation">,</span>
						ballotX<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
				t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인.&quot;</span><span class="token punctuation">,</span>
					checkMark<span class="token punctuation">)</span>

				<span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

				<span class="token keyword">if</span> resp<span class="token punctuation">.</span>StatusCode <span class="token operator">==</span> u<span class="token punctuation">.</span>statusCode <span class="token punctuation">{</span>
					t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t상태 코드가 \&quot;%d\&quot; 인지 확인. %v&quot;</span><span class="token punctuation">,</span>
						u<span class="token punctuation">.</span>statusCode<span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t상태 코드가 \&quot;%d\&quot; 인지 확인. %v %v&quot;</span><span class="token punctuation">,</span>
						u<span class="token punctuation">.</span>statusCode<span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>for loop 을 활용해 여러개의 테스트를 한번에 하고 있다.</li> <li>struct로 테이블을 구성해 테스트 하고있다.</li></ul> <h3 id="_1-3-모의-호출"><a href="#_1-3-모의-호출" class="header-anchor">#</a> 1-3. 모의 호출</h3> <ul><li>위의 테스트들은 성공적이긴 하지만, 인터넷 환경에 종속적인 문제점이 있다.</li> <li>mock을 생성해 인터넷에 접근이 안돼도 정상적으로 테스트가 되도록 해줘야 한다.</li> <li>http를 하기위한 모의 패키지로 httptest 패키지가 존재한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// HTTP GET의 모의 호출을 사용하는 예제</span>
<span class="token comment">// 책에서 사용한 예제와는 다소 다른 부분이 있다.</span>
<span class="token keyword">package</span> listing12

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/xml&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;net/http/httptest&quot;</span>
	<span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> checkMark <span class="token operator">=</span> <span class="token string">&quot;\u2713&quot;</span>
<span class="token keyword">const</span> ballotX <span class="token operator">=</span> <span class="token string">&quot;\u2717&quot;</span>

<span class="token comment">// feed 변수에는 우리가 기대하는 모의 응답 데이터를 대입한다.</span>
<span class="token keyword">var</span> feed <span class="token operator">=</span> <span class="token string">`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;rss&gt;
&lt;channel&gt;
    &lt;title&gt;Going Go Programming&lt;/title&gt;
    &lt;description&gt;Golang : https://github.com/goinggo&lt;/description&gt;
    &lt;link&gt;http://www.goinggo.net/&lt;/link&gt;
    &lt;item&gt;
        &lt;pubDate&gt;Sun, 15 Mar 2015 15:04:00 +0000&lt;/pubDate&gt;
        &lt;title&gt;Object Oriented Programming Mechanics&lt;/title&gt;
        &lt;description&gt;Go is an object oriented language.&lt;/description&gt;
        &lt;link&gt;http://www.goinggo.net/2015/03/object-oriented&lt;/link&gt;
    &lt;/item&gt;
&lt;/channel&gt;
&lt;/rss&gt;`</span>

<span class="token comment">// mockServer 함수는 GET 요청을 처리할 서버에 대한 포인터를 리턴한다.</span>
<span class="token keyword">func</span> <span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>httptest<span class="token punctuation">.</span>Server <span class="token punctuation">{</span>
	f <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		w<span class="token punctuation">.</span><span class="token function">WriteHeader</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
		w<span class="token punctuation">.</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/xml&quot;</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Fprintln</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> feed<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> httptest<span class="token punctuation">.</span><span class="token function">NewServer</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span><span class="token function">HandlerFunc</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// TestDownload 함수는 HTTP GET 요청을 이용해 콘텐츠를 다운로드 한 후</span>
<span class="token comment">// 해당 콘텐츠를 언마샬링 할 수 있는지 확인한다.</span>
<span class="token keyword">func</span> <span class="token function">TestDownload</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	statusCode <span class="token operator">:=</span> http<span class="token punctuation">.</span>StatusOK

	server <span class="token operator">:=</span> <span class="token function">mockServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> server<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;콘텐츠 다운로드 기능 테스트를 시작.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\tURL \&quot;%s\&quot; 호출 시 상태 코드가 \&quot;%d\&quot;인지 확인.&quot;</span><span class="token punctuation">,</span>
			server<span class="token punctuation">.</span>URL<span class="token punctuation">,</span> statusCode<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			resp<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>URL<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인.&quot;</span><span class="token punctuation">,</span>
					ballotX<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t\tHTTP GET 요청을 보냈는지 확인.&quot;</span><span class="token punctuation">,</span>
				checkMark<span class="token punctuation">)</span>

			<span class="token keyword">defer</span> resp<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

			<span class="token keyword">if</span> resp<span class="token punctuation">.</span>StatusCode <span class="token operator">!=</span> statusCode <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t상태 코드가 \&quot;%d\&quot; 인지 확인. %v %v&quot;</span><span class="token punctuation">,</span>
					statusCode<span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			t<span class="token punctuation">.</span><span class="token function">Logf</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t상태 코드가 \&quot;%d\&quot; 인지 확인. %v&quot;</span><span class="token punctuation">,</span>
				statusCode<span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>

			<span class="token keyword">var</span> d Document
			<span class="token keyword">if</span> err <span class="token operator">:=</span> xml<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t콘텐츠 언마샬링에 실패했습니다.&quot;</span><span class="token punctuation">,</span>
					ballotX<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t콘텐츠 언마샬링이 성공했습니다.&quot;</span><span class="token punctuation">,</span>
				checkMark<span class="token punctuation">)</span>

			<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Channel<span class="token punctuation">.</span>Items<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t피드에 \&quot;1\&quot; 개의 아이템이 존재하는지 확인.&quot;</span><span class="token punctuation">,</span>
					checkMark<span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;\t\t피드에 \&quot;1\&quot; 개의 아이템이 존재하는지 확인.&quot;</span><span class="token punctuation">,</span>
					ballotX<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>Channel<span class="token punctuation">.</span>Items<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Item defines the fields associated with the item tag in</span>
<span class="token comment">// the buoy RSS document.</span>
<span class="token keyword">type</span> Item <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	XMLName     xml<span class="token punctuation">.</span>Name <span class="token string">`xml:&quot;item&quot;`</span>
	Title       <span class="token builtin">string</span>   <span class="token string">`xml:&quot;title&quot;`</span>
	Description <span class="token builtin">string</span>   <span class="token string">`xml:&quot;description&quot;`</span>
	Link        <span class="token builtin">string</span>   <span class="token string">`xml:&quot;link&quot;`</span>
<span class="token punctuation">}</span>

<span class="token comment">// Channel defines the fields associated with the channel tag in</span>
<span class="token comment">// the buoy RSS document.</span>
<span class="token keyword">type</span> Channel <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	XMLName     xml<span class="token punctuation">.</span>Name <span class="token string">`xml:&quot;channel&quot;`</span>
	Title       <span class="token builtin">string</span>   <span class="token string">`xml:&quot;title&quot;`</span>
	Description <span class="token builtin">string</span>   <span class="token string">`xml:&quot;description&quot;`</span>
	Link        <span class="token builtin">string</span>   <span class="token string">`xml:&quot;link&quot;`</span>
	PubDate     <span class="token builtin">string</span>   <span class="token string">`xml:&quot;pubDate&quot;`</span>
	Items       <span class="token punctuation">[</span><span class="token punctuation">]</span>Item   <span class="token string">`xml:&quot;item&quot;`</span>
<span class="token punctuation">}</span>

<span class="token comment">// Document defines the fields associated with the buoy RSS document.</span>
<span class="token keyword">type</span> Document <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	XMLName xml<span class="token punctuation">.</span>Name <span class="token string">`xml:&quot;rss&quot;`</span>
	Channel Channel  <span class="token string">`xml:&quot;channel&quot;`</span>
	URI     <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>mockServer 함수를 정의해 가짜 함수를 만들어줘서, 미리 feed에다가 예측값을 받아와준다.</li></ul> <h3 id="_1-4-종단점-테스트"><a href="#_1-4-종단점-테스트" class="header-anchor">#</a> 1-4. 종단점 테스트</h3> <ul><li>endopoint 테스트가 필요할 때도 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 간단한 웹서비스 예제</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;github.com/gwegwe1234/go-in-action/chapter9/endpoint/handler&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 애플리케이션 진입점</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	handlers<span class="token punctuation">.</span><span class="token function">Routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;웹서비스 실행 중: 포트: 4000&quot;</span><span class="token punctuation">)</span>
	http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">&quot;:4000&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 웹서비스의 종단점을 제공하는 패키지</span>
<span class="token keyword">package</span> handlers

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/json&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 웹서비스의 라우트를 설정한다.</span>
<span class="token keyword">func</span> <span class="token function">Routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/sendjson&quot;</span><span class="token punctuation">,</span> SendJSON<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// SendJSON 함수는 간단한 JSON 문서를 리턴한다.</span>
<span class="token keyword">func</span> <span class="token function">SendJSON</span><span class="token punctuation">(</span>rw http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	u <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Name  <span class="token builtin">string</span>
		Email <span class="token builtin">string</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span>  <span class="token string">&quot;Bill&quot;</span><span class="token punctuation">,</span>
		Email<span class="token punctuation">:</span> <span class="token string">&quot;bill@ardanstudios.com&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	rw<span class="token punctuation">.</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span>
	rw<span class="token punctuation">.</span><span class="token function">WriteHeader</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
	json<span class="token punctuation">.</span><span class="token function">NewEncoder</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 종단점의 동작을 확인하기 위한</span>
<span class="token comment">// 테스트 코드 예제</span>
<span class="token keyword">package</span> handlers_test

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/json&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;net/http/httptest&quot;</span>
	<span class="token string">&quot;testing&quot;</span>

	<span class="token string">&quot;github.com/webgenie/go-in-action/chapter9/listing17/handlers&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> checkMark <span class="token operator">=</span> <span class="token string">&quot;\u2713&quot;</span>
<span class="token keyword">const</span> ballotX <span class="token operator">=</span> <span class="token string">&quot;\u2717&quot;</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	handlers<span class="token punctuation">.</span><span class="token function">Routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// TestSendJSON 함수는 종단점에 대한 테스트를 수행한다.</span>
<span class="token keyword">func</span> <span class="token function">TestSendJSON</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;SendJSON 종단점의 동작에 대한 테스트 시작.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		req<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/sendjson&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t웹 요청을 보내는지 확인.&quot;</span><span class="token punctuation">,</span>
				ballotX<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t웹 요청을 보내는지 확인.&quot;</span><span class="token punctuation">,</span>
			checkMark<span class="token punctuation">)</span>

		rw <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewRecorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		http<span class="token punctuation">.</span>DefaultServeMux<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>rw<span class="token punctuation">,</span> req<span class="token punctuation">)</span>

		<span class="token keyword">if</span> rw<span class="token punctuation">.</span>Code <span class="token operator">!=</span> <span class="token number">200</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 코드가 \&quot;200\&quot;인지 확인.&quot;</span><span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> rw<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 코드가 \&quot;200\&quot;인지 확인.&quot;</span><span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>

		u <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
			Name  <span class="token builtin">string</span>
			Email <span class="token builtin">string</span>
		<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

		<span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>rw<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터 디코딩 동작 확인.&quot;</span><span class="token punctuation">,</span> ballotX<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터 디코딩 동작 확인.&quot;</span><span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>

		<span class="token keyword">if</span> u<span class="token punctuation">.</span>Name <span class="token operator">==</span> <span class="token string">&quot;Bill&quot;</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터의 이름 확인.&quot;</span><span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터의 이름 확인.&quot;</span><span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> u<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> u<span class="token punctuation">.</span>Email <span class="token operator">==</span> <span class="token string">&quot;bill@ardanstudios.com&quot;</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터의 메일 주소 확인.&quot;</span><span class="token punctuation">,</span> checkMark<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;\t응답 데이터의 메일 주소 확인.&quot;</span><span class="token punctuation">,</span> ballotX<span class="token punctuation">,</span> u<span class="token punctuation">.</span>Email<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">go</span> test <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token operator">=</span> RUN   TestSendJSON
<span class="token operator">--</span><span class="token operator">-</span> PASS<span class="token punctuation">:</span> TestSendJSON <span class="token punctuation">(</span><span class="token number">0.00</span>s<span class="token punctuation">)</span>
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">:</span> SendJSON 종단점의 동작에 대한 테스트 시작<span class="token punctuation">.</span>
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span>         웹 요청을 보내는지 확인<span class="token punctuation">.</span> ✓
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">39</span><span class="token punctuation">:</span>         응답 코드가 <span class="token string">&quot;200&quot;</span>인지 확인<span class="token punctuation">.</span> ✓
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">49</span><span class="token punctuation">:</span>         응답 데이터 디코딩 동작 확인<span class="token punctuation">.</span> ✓
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">52</span><span class="token punctuation">:</span>         응답 데이터의 이름 확인<span class="token punctuation">.</span> ✓
    handler_test<span class="token punctuation">.</span><span class="token keyword">go</span><span class="token punctuation">:</span><span class="token number">58</span><span class="token punctuation">:</span>         응답 데이터의 메일 주소 확인<span class="token punctuation">.</span> ✓
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>endpoint<span class="token operator">/</span>handler    <span class="token number">0.010</span>s
</code></pre></div><h2 id="_2-예제-코드"><a href="#_2-예제-코드" class="header-anchor">#</a> 2. 예제 코드</h2> <ul><li>godoc이 제공하는 또다른 기능은 예제 코드이다.</li> <li>패키지에 대한 Go 문서를 생성할 때 예제 코드를 함께 생성할 수 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 테스트 코드 작성법을 소개 하기 위한 예제 단위 테스트 코드</span>
<span class="token keyword">package</span> handlers

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;encoding/json&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;net/http&quot;</span>
	<span class="token string">&quot;net/http/httptest&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// ExampleSendJSON 함수는 기본 예제를 제공한다.</span>
<span class="token keyword">func</span> <span class="token function">ExampleSendJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	r<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/sendjson&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
	w <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewRecorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	http<span class="token punctuation">.</span>DefaultServeMux<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span>

	<span class="token keyword">var</span> u <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Name  <span class="token builtin">string</span>
		Email <span class="token builtin">string</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">NewDecoder</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;에러:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// fmt 패키지를 이용해서 검사할 결과를 표준 출력 장치에 출력한다.</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
	<span class="token comment">// Output:</span>
	<span class="token comment">// {Bill bill@ardanstudios.com}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>예제 코드는 함수나 메소드를 기반으로 생성된다.</li> <li>이때 함수 이름은 Test로 시작하지 않고, Example로 시작된다.</li> <li>예제코드의 이름은 항상 이미 존재하는 함수나 메소드를 기반으로 만들어야 한다.</li> <li>위의 소스는 handlers 패키지가 공개하는 SendJSON을 위한 예제 코드이다.</li></ul> <p><img src="/study-collection/assets/img/go9-1.87fa60f2.png" alt="godoc"></p> <ul><li>위와 같이 godoc 로컬에 예제가 추가된다.</li> <li>역시나 단위테스트 단위이기 때문에 아래와 같이 실행도 가능하다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run<span class="token operator">=</span><span class="token string">&quot;ExampleSendJSON&quot;</span>
<span class="token operator">==</span><span class="token operator">=</span> RUN   ExampleSendJSON
<span class="token operator">--</span><span class="token operator">-</span> PASS<span class="token punctuation">:</span> ExampleSendJSON <span class="token punctuation">(</span><span class="token number">0.00</span>s<span class="token punctuation">)</span>
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>endpoint<span class="token operator">/</span>handler    <span class="token number">0.011</span>s
</code></pre></div><h2 id="_3-벤치마킹"><a href="#_3-벤치마킹" class="header-anchor">#</a> 3. 벤치마킹</h2> <ul><li>벤치마킹이란 코드의 성능을 테스트하는 것을 말한다.</li> <li>CPU나 메모리 이슈를 파악하기 위해 사용할 수 있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 정수를 문자열로 변환하는 가장 빠른 방법을 테스트하기 위해 벤치마킹을 활용하는 예제</span>
<span class="token comment">// 첫 번째 방법은 fmt.Sprintf 함수를, 두 번째 방법은 strconv.FormatInt 함수를 테스트하며,</span>
<span class="token comment">// 마지막으로는 strconv.Itoa 함수를 테스트한다.</span>
<span class="token keyword">package</span> benchmarking

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
	<span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// BenchmarkSprintf 함수는 fmt.Sprintf 함수의</span>
<span class="token comment">// 성능을 테스트한다.</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkSprintf</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	number <span class="token operator">:=</span> <span class="token number">10</span>

	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> number<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// BenchmarkFormat 함수는 strconv.FormatInt 함수의</span>
<span class="token comment">// 성능을 테스트한다.</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkFormat</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	number <span class="token operator">:=</span> <span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// BenchmarkItoa 함수는 strconv.Itoa 함수의</span>
<span class="token comment">// 성능을 테스트한다.</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkItoa</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	number <span class="token operator">:=</span> <span class="token number">10</span>

	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>벤치 마킹을 실행할 땐 아래와 같은 명령어를 사용한다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">-</span>bench<span class="token operator">=</span><span class="token string">&quot;BenchmarkSprintf&quot;</span>

goos<span class="token punctuation">:</span> darwin
goarch<span class="token punctuation">:</span> amd64
pkg<span class="token punctuation">:</span> github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking
BenchmarkSprintf<span class="token operator">-</span><span class="token number">16</span>     <span class="token number">20000000</span>                <span class="token number">65.5</span> ns<span class="token operator">/</span>op
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking        <span class="token number">1.388</span>s
</code></pre></div><ul><li>20000000는 2천만번 테스트가 실행됐다는 의미이다.</li> <li>오른쪽 65.5 ns 는 하나의 sprintf 함수를 호출할때 걸리는 시간이다.</li> <li>ok는 정상적으로 벤치마킹이 종료됐다는 걸 뜻한다.</li> <li>전체 실행시가은 약 1.388초이다.</li> <li>시간을 조정하고 싶으면 -benchtime 옵션을 주면 된다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">-</span>bench<span class="token operator">=</span><span class="token string">&quot;BenchmarkSprintf&quot;</span> <span class="token operator">-</span>benchtime<span class="token operator">=</span><span class="token number">3</span>s

goos<span class="token punctuation">:</span> darwin
goarch<span class="token punctuation">:</span> amd64
pkg<span class="token punctuation">:</span> github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking
BenchmarkSprintf<span class="token operator">-</span><span class="token number">16</span>     <span class="token number">100000000</span>               <span class="token number">65.9</span> ns<span class="token operator">/</span>op
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking        <span class="token number">6.670</span>s
</code></pre></div><ul><li>모든 벤치마킹 함수를 실행하려면 다음과 같이 . 명령어를 쓴다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">-</span>bench<span class="token operator">=</span><span class="token punctuation">.</span> <span class="token operator">-</span>benchtime<span class="token operator">=</span><span class="token number">3</span>s

goos<span class="token punctuation">:</span> darwin
goarch<span class="token punctuation">:</span> amd64
pkg<span class="token punctuation">:</span> github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking
BenchmarkSprintf<span class="token operator">-</span><span class="token number">16</span>     <span class="token number">50000000</span>                <span class="token number">69.0</span> ns<span class="token operator">/</span>op
BenchmarkFormat<span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2000000000</span>               <span class="token number">2.44</span> ns<span class="token operator">/</span>op
BenchmarkItoa<span class="token operator">-</span><span class="token number">16</span>        <span class="token number">2000000000</span>               <span class="token number">2.34</span> ns<span class="token operator">/</span>op
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking        <span class="token number">13.572</span>s
</code></pre></div><ul><li>두번째와 세번째 함수가 첫번째보다 월등히 빠른걸 알 수 있다.</li> <li>메모리 할당 횟수를 -benchmem 옵션을 통해 알 수있다.</li></ul> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>v <span class="token operator">-</span>run<span class="token operator">=</span><span class="token string">&quot;none&quot;</span> <span class="token operator">-</span>bench<span class="token operator">=</span><span class="token punctuation">.</span> <span class="token operator">-</span>benchtime<span class="token operator">=</span><span class="token number">3</span>s <span class="token operator">-</span>benchmem

goos<span class="token punctuation">:</span> darwin
goarch<span class="token punctuation">:</span> amd64
pkg<span class="token punctuation">:</span> github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking
BenchmarkSprintf<span class="token operator">-</span><span class="token number">16</span>     <span class="token number">50000000</span>                <span class="token number">65.9</span> ns<span class="token operator">/</span>op            <span class="token number">16</span> B<span class="token operator">/</span>op          <span class="token number">2</span> allocs<span class="token operator">/</span>op
BenchmarkFormat<span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2000000000</span>               <span class="token number">2.31</span> ns<span class="token operator">/</span>op            <span class="token number">0</span> B<span class="token operator">/</span>op          <span class="token number">0</span> allocs<span class="token operator">/</span>op
BenchmarkItoa<span class="token operator">-</span><span class="token number">16</span>        <span class="token number">2000000000</span>               <span class="token number">2.29</span> ns<span class="token operator">/</span>op            <span class="token number">0</span> B<span class="token operator">/</span>op          <span class="token number">0</span> allocs<span class="token operator">/</span>op
PASS
ok      github<span class="token punctuation">.</span>com<span class="token operator">/</span>gwegwe1234<span class="token operator">/</span><span class="token keyword">go</span><span class="token operator">-</span>in<span class="token operator">-</span>action<span class="token operator">/</span>chapter9<span class="token operator">/</span>benchmarking        <span class="token number">13.042</span>s
</code></pre></div><h2 id="_4-요약"><a href="#_4-요약" class="header-anchor">#</a> 4. 요약</h2> <ul><li>Go는 언어 차원에서 테스트를 지원하며, 테스트에 필요한 모든 도구들을 제공한다.</li> <li>go test 도구를 이용하면 단위 테스트 코드를 실행할 수 있다.</li> <li>테스트 파일의 이름은 항상 _test.go로 끝나야 한다.</li> <li>테이블 테스트는 하나의 테스트 함수로 여러 가지 테스트를 수행하기 위한 좋은 방법이다.</li> <li>예제 코드는 테스트 및 패키지 문서화를 한 번에 수행할 수 있는 방법이다.</li> <li>벤치마크는 코드의 성능을 측정하기 위한 메커니즘을 제공한다.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study-collection/book/go-in-action/08.html" class="prev">8장 표준 라이브러리</a></span> <span class="next"><a href="/study-collection/book/Building-Microservice-With-Go/01.html">1장 마이크로서비스 소개</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-collection/assets/js/app.38d06f6c.js" defer></script><script src="/study-collection/assets/js/2.ad275ace.js" defer></script><script src="/study-collection/assets/js/66.c577faf6.js" defer></script>
  </body>
</html>
